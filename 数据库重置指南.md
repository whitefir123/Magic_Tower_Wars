# 赛季重置指南 - 1.0 版本部署

## 数据库连接信息
- **Supabase URL**: `https://iggnwszpgggwubbofwoj.supabase.co`
- **位置**: 代码文件 `src/services/SupabaseService.js` 第 95 行

---

## 重置步骤

### 步骤 1: 清空所有测试数据

在 Supabase SQL Editor 中执行：

```sql
-- 清空全局排行榜
DELETE FROM leaderboard;

-- 清空每日挑战排行榜
DELETE FROM daily_leaderboard;

-- 清空赛季奖励记录
DELETE FROM season_rewards;

-- 清空旧赛季
DELETE FROM seasons;
```

### 步骤 2: 创建新的 S1 赛季

```sql
-- 插入 S1 赛季（从今天开始，持续 30 天）
INSERT INTO seasons (code, name, start_at, end_at, is_active)
VALUES (
  'S1', 
  '启航·创世赛季', 
  NOW(),                      -- 从现在开始
  NOW() + INTERVAL '30 days', -- 持续 30 天
  true                        -- 激活状态
);

-- 查看创建的赛季信息（确认时间正确）
SELECT 
  code,
  name,
  start_at AT TIME ZONE 'Asia/Shanghai' as 开始时间,
  end_at AT TIME ZONE 'Asia/Shanghai' as 结束时间,
  is_active as 是否激活
FROM seasons
ORDER BY start_at DESC;
```

### 步骤 3: 验证重置结果

```sql
-- 确认所有表都已清空
SELECT 
  (SELECT COUNT(*) FROM leaderboard) as 全局排行榜记录数,
  (SELECT COUNT(*) FROM daily_leaderboard) as 每日挑战记录数,
  (SELECT COUNT(*) FROM season_rewards) as 赛季奖励记录数,
  (SELECT COUNT(*) FROM seasons) as 赛季数量;
```

应该看到：
- 全局排行榜记录数: 0
- 每日挑战记录数: 0
- 赛季奖励记录数: 0
- 赛季数量: 1

---

## 自定义赛季时间（可选）

如果你想指定具体的开始和结束时间：

```sql
-- 先删除刚才创建的赛季
DELETE FROM seasons;

-- 指定具体时间（示例：2026-02-01 到 2026-03-01）
INSERT INTO seasons (code, name, start_at, end_at, is_active)
VALUES (
  'S1', 
  '启航·创世赛季', 
  '2026-02-01 00:00:00+08'::timestamptz,  -- 北京时间 2026-02-01 00:00:00
  '2026-03-01 23:59:59+08'::timestamptz,  -- 北京时间 2026-03-01 23:59:59
  true
);
```

---

## 完成！

✅ 所有测试数据已清空  
✅ 新的 S1 赛季已创建  
✅ 公告已更新为 1.0 版本（`src/data/changelog.js`）

现在可以部署到 Netlify 了！
