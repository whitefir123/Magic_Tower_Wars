/* ========================================================================
   TOOLTIP & MENU COMPONENTS
   ======================================================================== */

/* Tooltip */
#tooltip {
  position: fixed;
  background-image: url('https://i.postimg.cc/mkszT7tr/tishikuang2.png');
  background-size: 100% 100%;
  background-repeat: no-repeat;
  background-color: rgba(20, 20, 25, 0.8); /* 半透明背景色作为衬底，防止图片加载失败或透明区域看不清 */
  border: 1px solid #4a4a50;
  border-radius: 4px;
  padding: 12px;
  color: #e0e0e0;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-size: 14px;
  z-index: 1000000; /* Ensure tooltip is always on top */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
  pointer-events: none; /* ✅ v2.0: 默认不接收鼠标事件，防止闪烁 */
  min-width: 200px;
  max-width: 280px; /* ✅ v2.0: 稍微增加最大宽度以容纳套装信息 */
  max-height: 80vh; /* ✅ v2.0: 限制最大高度，防止溢出屏幕 */
  
  /* ✅ v3.0: 优化滚动条体验 */
  overflow-y: auto; /* 内容过多时显示滚动条 */
  overflow-x: hidden;
  
  /* 隐藏默认滚动条但保留功能 (Chrome/Safari/Edge) */
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
}

/* Chrome/Safari/Edge 滚动条样式 */
#tooltip::-webkit-scrollbar {
  width: 4px;
}

#tooltip::-webkit-scrollbar-track {
  background: transparent;
}

#tooltip::-webkit-scrollbar-thumb {
  background-color: rgba(255, 255, 255, 0.2);
  border-radius: 2px;
}

#tooltip .tt-name { 
  color: #b71c1c; /* 默认深红色，具体由JS覆盖 */
  font-family: var(--font-header); 
  margin-bottom:6px; 
  font-size:1.1rem; 
  font-weight: bold;
  text-shadow: none;
  padding-left: 8px; /* 整体右移 */
}

#tooltip .tt-type { 
  color: #8d6e63; /* 浅棕色 */
  font-family: var(--font-body); 
  margin-bottom:4px; 
  font-size:0.85rem; 
  padding-left: 8px; /* 整体右移 */
}

#tooltip .tt-stat { 
  color: #5d4037; /* 深棕色 */
  padding-left: 8px; /* 整体右移 */
}

/* ✅ V2.0: 属性显示格式样式 */
#tooltip .tt-stat .val-main {
  color: #e65100; /* 主数值：深橙色 */
  font-weight: bold;
}

#tooltip .tt-stat .val-sub {
  color: #8d6e63; /* 副说明：浅棕色 */
  font-size: 0.85em; /* 字体更小 */
  margin-left: 4px;
}

#tooltip .tt-stat .val-bonus {
  color: #006064; /* 词缀加成：深青色 */
  font-weight: normal;
}

/* ✅ v2.0: 词缀显示样式 */
#tooltip .tt-affix {
  margin-top: 4px;
  font-size: 0.9em;
  padding-left: 8px; /* 整体右移 */
}

#tooltip .tt-affix.tt-prefix {
  color: #0277bd; /* 前缀：深蓝色 */
}

#tooltip .tt-affix.tt-suffix {
  color: #ad1457; /* 后缀：深粉色 */
}

/* ✅ v2.0: 传奇特效样式（暗金色，醒目） */
#tooltip .tt-unique-effect {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 2px solid #8d6e63;
  border-bottom: 2px solid #8d6e63;
  padding-bottom: 8px;
  background: rgba(141, 110, 99, 0.1);
  padding-left: 8px; /* 整体右移 */
}

#tooltip .tt-unique-title {
  color: #827717; /* 深暗金色 */
  font-weight: bold;
  font-size: 1.05em;
  margin-bottom: 4px;
  text-shadow: none;
}

#tooltip .tt-unique-desc {
  color: #e65100; /* 深橙色 */
  font-size: 0.9em;
  line-height: 1.4;
  margin-top: 4px;
}

/* ✅ v2.0: 套装信息样式 */
#tooltip .tt-set-info {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 2px solid #8d6e63;
  font-size: 0.9em;
  padding-left: 8px; /* 整体右移 */
}

#tooltip .tt-set-header {
  color: #e65100; /* 深橙色 */
  font-weight: bold;
  font-size: 1.0em;
  margin-bottom: 8px;
}

#tooltip .tt-set-effect {
  margin-top: 6px;
  padding: 4px 0;
  line-height: 1.4;
}

#tooltip .tt-set-effect-active {
  color: #1b5e20; /* 已激活：深绿色 */
  font-weight: bold;
}

#tooltip .tt-set-effect-inactive {
  color: #a1887f; /* 未激活：浅棕灰色 */
  opacity: 0.8;
}

#tooltip .tt-set-piece-count {
  font-weight: bold;
  margin-right: 4px;
}

#tooltip .tt-set-effect-text {
  color: inherit;
}

/* ✅ 补充：其他物品属性类 */
#tooltip .tt-quality {
  padding-left: 8px;
}

#tooltip .tt-enhance {
  padding-left: 8px;
}

#tooltip .tt-ipower {
  padding-left: 8px;
}

#tooltip .tt-desc {
  color: #5d4037; /* 深棕色 */
  padding-left: 8px;
}

#tooltip .tt-sockets {
  padding-left: 8px;
}

/**
 * Z-Index 层级体系 (Global Z-Index Hierarchy)
 * ===========================================
 * 1000001: Context Menu (#item-action-menu) - 最高优先级，确保右键菜单在所有元素之上
 * 1000000: Tooltip - 提示框，在大部分元素之上
 *  999999: Loading Screen - 加载界面
 *  999998: Leaderboard - 排行榜
 *   50000: Toast (Achievement) - 成就提示
 *   30000: Modal - 模态对话框
 *   20000: Full-screen UI (Talent Tree, Leaderboard) - 全屏UI
 *   10000: Overlay (Inventory, Shop, Forge, Gambler, Bestiary) - 弹窗UI
 *    5000: HUD - 游戏界面HUD
 *       0: Game Canvas - 游戏画布
 */

/* Item Action Menu */
#item-action-menu { 
  position: fixed;
  z-index: 1000001; /* 最高层级：右键上下文菜单，确保在所有元素之上 */
  background: rgba(10, 10, 12, 0.98);
  border: 2px solid #8b7355;
  border-radius: 4px;
  display: none; /* 默认隐藏 */
  min-width: 160px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.9);
  padding:8px 0; 
}

.action-menu-item { 
  padding:10px 16px; 
  color:#ddd; 
  font-family: var(--font-body); 
  font-size:0.95rem; 
  cursor:pointer; 
  transition: all 0.15s ease; 
  border-bottom:1px solid rgba(255,255,255,0.05); 
}

.action-menu-item:last-child { 
  border-bottom:none; 
}

.action-menu-item:hover { 
  background:rgba(255,215,0,0.15); 
  color:#ffd700; 
  padding-left:20px; 
}

.action-menu-item[data-action="discard"]:hover { 
  background:rgba(231,76,60,0.15); 
  color:#e74c3c; 
}

/* Skill Tooltip Styles - 英雄联盟风格 */
.tt-skill-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid rgba(141, 110, 99, 0.3);
  padding-bottom: 8px;
  margin-bottom: 8px;
  padding-left: 8px; /* 整体右移 */
}

.tt-skill-name {
  color: #5d4037; /* 深棕色 */
  font-size: 1.1rem;
  font-weight: bold;
  font-family: var(--font-header);
  text-shadow: none;
}

.tt-skill-key {
  color: #5d4037; /* 深棕色 */
  font-size: 0.85rem;
  background: rgba(141, 110, 99, 0.1);
  padding: 3px 8px;
  border-radius: 4px;
  border: 1px solid rgba(141, 110, 99, 0.2);
  font-weight: 600;
  letter-spacing: 0.5px;
}

.tt-skill-meta {
  display: flex;
  justify-content: space-between;
  font-size: 0.85rem;
  color: #8d6e63; /* 淡一点的深棕色 */
  margin-bottom: 12px;
}

.tt-skill-type {
  font-weight: 500;
}

.tt-skill-type-row {
  color: #8d6e63; /* 淡一点的深棕色 */
  font-weight: 600;
  margin-bottom: 8px;
  font-size: 0.9rem;
  padding-left: 8px; /* 整体右移 */
}

.tt-skill-cd {
  color: #000000; /* 黑色 */
}

.tt-skill-cd-row {
  color: #000000; /* 黑色 */
  font-size: 0.85rem;
  margin-bottom: 10px;
  padding-left: 8px; /* 整体右移 */
}

.tt-skill-desc {
  color: #5d4037; /* 深棕色 */
  font-size: 0.9rem;
  line-height: 1.6;
  margin-bottom: 8px;
  padding-left: 8px; /* 整体右移 */
}

.tt-skill-hint {
  margin-top: 10px;
  padding-top: 8px;
  border-top: 1px dashed rgba(141, 110, 99, 0.3);
  font-size: 0.8rem;
  color: #8d6e63; /* 浅棕色 */
  font-style: italic;
  display: flex;
  align-items: center;
  gap: 6px;
  padding-left: 8px; /* 整体右移 */
}

.tt-mouse-icon {
  font-size: 0.9rem;
  opacity: 0.8;
}

/* 错误提示 Toast 样式 */
.error-toast {
  position: fixed;
  top: 20px;
  right: 20px;
  padding: 16px 24px;
  background: rgba(26, 20, 16, 0.95);
  border: 2px solid #ff6b6b;
  border-radius: 8px;
  color: white;
  font-size: 16px;
  font-weight: bold;
  z-index: 10000;
  opacity: 0;
  transform: translateX(400px);
  transition: all 0.3s ease;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
  max-width: 400px;
  word-wrap: break-word;
}

.error-toast.show {
  opacity: 1;
  transform: translateX(0);
}
