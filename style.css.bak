:root {
  --bg-color: #050505;
  --sidebar-bg: #111;
  --border-color: #2c241b;
  --accent-gold: #ffd700;
  --text-main: #e0d6c8;
  --text-dim: #8c8273;
  --font-header: 'Cinzel', serif;
  --font-body: 'Spectral', serif;
  --gold-gradient: linear-gradient(135deg, #ffd700, #ffed4e, #ffa500);
  /* 按钮尺寸控制（不扭曲） */
  --btn-w: 320px;       /* 按钮基础宽度，根据素材调整 */
  --btn-ratio-w: 140;   /* 素材原始宽度比例 */
  --btn-ratio-h: 29;    /* 素材原始高度比例（保持 140:29 比例） */
  --btn-bg-scale: 1.0;  /* 按钮背景素材缩放，1.0 表示完全贴合素材 */
}

* { box-sizing: border-box; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }

body {
  margin: 0; padding: 0;
  background-color: #000; color: var(--text-main);
  font-family: var(--font-body);
  height: 100vh; width: 100vw; display: flex; justify-content: flex-end; align-items: center;
  overflow: hidden; font-size: 18px;
}

#main-ui {
  display: flex; width: 1940px; height: 900px;
  background-color: #080808; border: none !important;
  box-shadow: none !important; border-radius: 0; overflow: hidden;
  position: relative;
  transform-origin: right center;
  transform: scale(1);
  transition: transform 0.1s ease-out;
  flex-direction: row;
  flex-shrink: 0;
}

#left-column { 
  flex: 1; 
  display: flex; 
  flex-direction: column; 
  border-right: none !important; 
  position: relative; 
  background-color: #0a0a0a; 
  order: 1; 
  padding-right: 0;
  border: none !important;
  box-shadow: none !important;
}

#relic-bar { 
  height: 80px; 
  background: linear-gradient(to bottom, #1a1510, #0a0a0a); 
  border-bottom: none !important; 
  display: flex; 
  align-items: center; 
  padding: 0 30px; 
  gap: 15px; 
  box-shadow: none !important; 
  z-index: 5;
  border: none !important;
}
.relic-slot { 
  width: 48px; 
  height: 48px; 
  background: rgba(0,0,0,0.3); 
  border: none !important; 
  border-radius: 0; 
  display:flex; 
  align-items:center; 
  justify-content:center; 
  color:#444; 
  font-size:1.2rem; 
  transition: all .3s ease;
  box-shadow: none !important;
}
.relic-slot.filled { border-color: transparent; color: var(--accent-gold); box-shadow: none; transform: translateY(-2px); }

/* ========================================================================
   游戏图标容器 - 位于地图和右侧面板之间
   ======================================================================== */
#game-icons-container {
  position: absolute;
  right: 520px;
  top: 130px;
  width: 120px;
  height: auto;
  background: transparent;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  gap: 25px;
  z-index: 100; /* 提高层级，确保可点击 */
  pointer-events: auto;
}

#canvas-wrapper { flex:1; position:relative; background:#000; display:flex; justify-content:center; align-items:center; overflow:visible; z-index: 1; isolation: isolate; }
canvas { image-rendering: pixelated; box-shadow: none; border: none; z-index: 0; position: relative; pointer-events: auto; }

#system-log-container { position:absolute; bottom:6px; left:160px; width:450px; height:200px; background: linear-gradient(180deg, rgba(10,10,12,0.9), rgba(10,10,12,0.6)); border:none; border-left:none; padding:15px; overflow-y:auto; font-size:1rem; pointer-events:none; z-index:20; border-radius: 0; opacity:0; transition: opacity 0.5s ease-in-out; }
#log-panel { font-family: var(--font-body); line-height:1.5; text-shadow: 1px 1px 2px black; }
.log-entry { margin-bottom:4px; border-bottom:1px solid rgba(255,255,255,0.05); padding-bottom:2px; }
.log-combat { color:#e74c3c; font-weight:bold; }
.log-gain { color:#2ecc71; }
.log-info { color:#3498db; }
.log-ultimate { color:#f1c40f; font-weight:bold; letter-spacing: .5px; text-transform: uppercase; }

#right-sidebar {
  width: 520px; 
  background: url('https://i.postimg.cc/mr7Hkyg0/heroshuxingbackground1.png') repeat;
  display: flex;
  flex-direction: column;
  padding:20px; 
  gap:15px; 
  box-shadow: none !important;
  overflow-y:auto;
  flex-shrink: 0;
  order: 2;
  border: none !important;
  align-items: center;
  position: relative;
  z-index: 5;
}

/* 右侧面板内容居中 */
#right-sidebar > *:not(.btn-actions) {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 100%;
}

/* 右侧内容容器 */
#right-sidebar > div:not(.btn-actions) {
  width: 100%;
}

#right-sidebar::-webkit-scrollbar { display:none; }

.hp-section { width:100%; margin-bottom:10px; display:flex; flex-direction: column; align-items: center; grid-column: 2; }
.hp-container { 
  position:relative; 
  width:85%; 
  height:100px !important; 
  margin:10px auto 5px auto; 
  display:flex; 
  justify-content:center; 
  align-items:center; 
  filter: none;
  border: none !important;
  box-shadow: none !important;
  background: transparent !important;
}
.hp-container::after { content:""; position:absolute; inset:0; background: url('https://i.postimg.cc/J7B7Bx3p/xueliangcao1.png') no-repeat center center; background-size: 100% 100%; z-index:2; pointer-events:none; }
.hp-bar-inner { 
  position:absolute; 
  top:20px; 
  bottom:20px; 
  left:25px; 
  right:25px; 
  background:transparent; 
  border-radius:40px; 
  overflow:hidden; 
  z-index:1; 
  box-shadow: none !important;
  border: none !important;
}
.hp-fill { 
  height:100%; 
  width:100%; 
  background: url('https://i.postimg.cc/2jH1Vc1f/hp-liquid-1764572717577.jpg') repeat-x left center/auto 100%; 
  transition: width .3s cubic-bezier(.25,.1,.25,1); 
  box-shadow: none !important;
  border: none !important;
}
.hp-text-overlay { position:relative; z-index:3; font-family: var(--font-header); color:#fff; font-size:1.8rem; font-weight:bold; text-shadow: 0 2px 4px #000, 0 0 10px #800; margin-top:-2px; }

.rage-section { width:80%; display:flex; flex-direction:column; gap:2px; position: relative; z-index: 10; }
.rage-bar-bg { 
  width:100%; 
  height:8px; 
  background: #000; 
  border:none !important; 
  border-radius:0; 
  transition: all 0.2s ease;
  box-shadow: none !important;
  position: relative;
  z-index: 10;
}
#rage-fill { height:100%; width:0%; background: linear-gradient(90deg, #ff8c00, #ff0000); transition: all 0.2s ease; position: relative; z-index: 10; }
.rage-text { text-align:right; font-size:.8rem; color:#ffffff; transition: all 0.2s ease; position: relative; z-index: 10; }
/* 怒气满值时的样式 */
.rage-section.full .rage-bar-bg { border: none !important; box-shadow: none !important; }
.rage-section.full #rage-fill { box-shadow: none !important; }
.rage-section.full .rage-text { color: #ff0000; font-weight: bold; }

/* LEVEL header between HP and XP */
.level-header { width:80%; margin:6px auto 10px auto; text-align:center; color:var(--accent-gold); font-family:var(--font-header); font-size:1.4rem; letter-spacing:1px; text-shadow:0 2px 4px #000; }

/* XP */
.xp-section { width:80%; margin:0 auto 5px auto; display:flex; flex-direction:column; gap:2px; position: relative; z-index: 10; }
.xp-bar-bg { 
  width:100%; 
  height:8px; 
  background: #000; 
  border:none !important; 
  border-radius:0;
  box-shadow: none !important;
  position: relative;
  z-index: 10;
}
#xp-fill { height:100%; width:0%; background: linear-gradient(90deg, #ffd700, #f39c12); transition: width .3s cubic-bezier(.25,.1,.25,1); position: relative; z-index: 11; }
.xp-text { text-align:right; font-size:.8rem; color:#caa82a; position: relative; z-index: 12; }

/* Panels */
.panel-header { width:100%; text-align:center; font-family: var(--font-header); color: var(--accent-gold); font-size:1.2rem; text-transform: uppercase; letter-spacing:2px; text-shadow: 0 2px 5px black; margin-bottom:10px; align-self: center; border: none !important; box-shadow: none !important; }

.panel-container {
  width:92%; 
  margin:0 auto 15px auto;
  background-size: 100% 100%; 
  background-repeat: no-repeat;
  padding: 30px 45px !important; 
  position: relative; 
  box-shadow: none !important;
  min-height: 200px; 
  border: none !important;
  z-index: 2;
}

/* Stats content layout - 居中 */
.stats-content { display:grid; grid-template-columns: 1fr 1fr; column-gap:60px; row-gap:12px; padding:30px 12px; justify-items: center; position: relative; z-index: 3; }
.stat-row { display:grid; grid-template-columns: 1fr auto; align-items:center; column-gap:48px; padding:6px 0; border-bottom:none !important; }
.stat-row:last-child { border-bottom:none !important; }
.stat-name { color: rgba(90, 58, 26, 1); font-size:.95rem; font-weight:600; font-family: var(--font-header); letter-spacing:.2px; }
.stat-val { color:#000; font-family: var(--font-header); font-size:1.15rem; text-shadow:1px 1px 2px black; text-align:right; font-variant-numeric: tabular-nums; letter-spacing:.3px; min-width:2ch; }
.stat-gold { color: var(--accent-gold); text-shadow: 0 0 5px rgba(255,215,0,.5); }

/* Panel specific sizes */
/* =======================================================================
   角色属性（Stats Panel）样式 - 锁定
   注意：此段样式已确认验收，请勿随意修改。
   若必须调整，请先与 UI 确认；可调整项：padding-top / margin-top / min-height / padding-bottom
   更新时间：2025-12-03
   ======================================================================= */
.stats-panel { 
  padding-top: 72px; 
  margin-top: -38px; 
  min-height: 320px; 
  padding-bottom: 24px;
  background: url('https://i.postimg.cc/SNb51xWY/zhaungbeipanel1.png') no-repeat center/100% 100% !important;
}
.equip-panel { 
  min-height: 260px; 
  padding-bottom: 28px;
  background: url('https://i.postimg.cc/SNb51xWY/zhaungbeipanel1.png') no-repeat center/100% 100% !important;
}
.equip-panel .equip-content { margin-top: 24px; }

/* 拉近装备栏与角色属性的间距（回退到之前更近的版本） */
#right-sidebar .stats-panel + .panel-header { margin-top: -12px; margin-bottom: 6px; }
#right-sidebar .panel-header + .equip-panel { margin-top: -30px; }

/* Equip sockets */
.equip-content { display:grid; grid-template-columns: repeat(3, 1fr); justify-items:center; gap:10px; margin-top: 12px; position: relative; z-index: 3; width: 100%; max-width: 280px; margin-left: auto; margin-right: auto; transform: translateY(var(--equip-slot-offset-y, -12px)); will-change: transform; }
.equip-socket { 
  width:70px; 
  height:70px; 
  background:url('https://i.postimg.cc/9MC9ZxXb/zhuangbeicao1.png') no-repeat center/contain; 
  display:flex; 
  align-items:center; 
  justify-content:center; 
  filter: none; 
  transition: transform .1s;
  border: none !important;
  box-shadow: none !important;
  outline: none !important;
}
.equip-socket:hover { transform: scale(1.1); filter: brightness(1.2); }

.btn-actions { 
  display: flex; 
  flex-direction: column; 
  gap: 0px; 
  padding-top: 0px; 
  padding-bottom: 0px; 
  align-items: center; 
  width: 166px;
  height: 360px;
  margin-top: 0px;
  margin-bottom: 0px;
}

/* Backpack Icon Styles */
.backpack-icon {
  width: 80px;
  height: 80px;
  aspect-ratio: 1;
  cursor: pointer;
  transition: all 0.2s ease;
  filter: none;
  image-rendering: pixelated;
  position: relative;
  z-index: 101; /* 确保在最上层 */
  pointer-events: auto; /* 确保可以接收鼠标事件 */
}

.backpack-icon:hover {
  transform: scale(1.15);
  filter: brightness(1.3);
}

.backpack-icon:active {
  transform: scale(0.9);
  filter: brightness(0.9);
}

/* ========================================================================
   按钮样式系统重构 - 场景专用类
   ========================================================================
   废弃通用的 .btn-rpg，改为使用场景专用类，实现完全解耦
   ======================================================================== */

/* 基类：所有按钮共有的基础属性 */
.btn-core {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  position: relative;
  cursor: pointer;
  border: none;
  outline: none;
  user-select: none;
  font-family: var(--font-header);
  transition: filter .15s ease, transform .1s ease;
  z-index: 1;
}

/* 侧边栏按钮 - 用于右侧操作栏 */
.btn-sidebar {
  color: #eaeaea;
  background: transparent;
  aspect-ratio: calc(var(--btn-ratio-w) / var(--btn-ratio-h));
  width: 132px;
  height: 47px;
  padding: 0 var(--btn-px, 32px);
  white-space: nowrap;
  border-radius: 0;
  box-shadow: none !important;
  font-size: 1rem;
  letter-spacing: 1px;
  text-shadow: 1px 1px 2px black;
  text-transform: none;
  overflow: visible;
  clip-path: none;
  margin-top: 55px;
  margin-bottom: 55px;
}

.btn-sidebar::before {
  content: '';
  position: absolute;
  inset: -100%;
  background: url('https://i.postimg.cc/HWKMcMBL/anniu3.png') center / contain no-repeat transparent;
  pointer-events: none;
  z-index: -1;
  transform: none;
  transition: filter .15s ease;
}

.btn-sidebar:hover::before {
  filter: brightness(1.06);
}

.btn-sidebar:hover {
  color: #fff;
}

.btn-sidebar:active {
  transform: translateY(2px);
}

.btn-sidebar:disabled::before {
  filter: brightness(0.6);
}

.btn-sidebar:disabled {
  color: #666;
  cursor: not-allowed;
}

/* 按钮在按钮容器中居中 */
.btn-actions .btn-sidebar {
  align-self: center;
  width: 166px;
  max-width: 100%;
}

/* 必杀技按钮特定样式 */
#btn-ultimate {
  margin-top: 24px;
  margin-bottom: 24px;
}

/* 交易按钮 - 用于商店、赌徒 */
.btn-transaction {
  color: #eaeaea;
  background: transparent;
  aspect-ratio: calc(var(--btn-ratio-w) / var(--btn-ratio-h));
  width: 240px;
  height: auto;
  padding: 0 var(--btn-px, 32px);
  white-space: nowrap;
  border-radius: 0;
  box-shadow: none !important;
  font-size: 1rem;
  letter-spacing: 1px;
  text-shadow: 1px 1px 2px black;
  text-transform: none;
  overflow: visible;
  clip-path: none;
}

.btn-transaction::before {
  content: '';
  position: absolute;
  inset: -100%;
  background: url('https://i.postimg.cc/HWKMcMBL/anniu3.png') center / contain no-repeat transparent;
  pointer-events: none;
  z-index: -1;
  transform: none;
  transition: filter .15s ease;
}

.btn-transaction:hover::before {
  filter: brightness(1.06);
}

.btn-transaction:hover {
  color: #fff;
}

.btn-transaction:active {
  transform: translateY(2px);
}

.btn-transaction:disabled::before {
  filter: brightness(0.6);
}

.btn-transaction:disabled {
  color: #666;
  cursor: not-allowed;
}

/* 弹窗关闭按钮 - 用于背包、图鉴底部 */
.btn-modal-close {
  color: #eaeaea;
  background: transparent;
  aspect-ratio: calc(var(--btn-ratio-w) / var(--btn-ratio-h));
  width: 220px;
  height: auto;
  padding: 0 var(--btn-px, 32px);
  margin-top: 15px;
  white-space: nowrap;
  border-radius: 0;
  box-shadow: none !important;
  font-size: 1rem;
  letter-spacing: 1px;
  text-shadow: 1px 1px 2px black;
  text-transform: none;
  overflow: visible;
  clip-path: none;
}

.btn-modal-close::before {
  content: '';
  position: absolute;
  inset: -100%;
  background: url('https://i.postimg.cc/HWKMcMBL/anniu3.png') center / contain no-repeat transparent;
  pointer-events: none;
  z-index: -1;
  transform: none;
  transition: filter .15s ease;
}

.btn-modal-close:hover::before {
  filter: brightness(1.06);
}

.btn-modal-close:hover {
  color: #fff;
}

.btn-modal-close:active {
  transform: translateY(2px);
}

.btn-modal-close:disabled::before {
  filter: brightness(0.6);
}

.btn-modal-close:disabled {
  color: #666;
  cursor: not-allowed;
}

/* 系统操作按钮 - 用于死亡界面、昵称弹窗 */
.btn-system {
  color: #eaeaea;
  background: transparent;
  aspect-ratio: calc(var(--btn-ratio-w) / var(--btn-ratio-h));
  width: 132px;
  height: auto;
  padding: 0 var(--btn-px, 32px);
  white-space: nowrap;
  border-radius: 0;
  box-shadow: none !important;
  font-size: 1rem;
  letter-spacing: 1px;
  text-shadow: 1px 1px 2px black;
  text-transform: none;
  overflow: visible;
  clip-path: none;
}

.btn-system::before {
  content: '';
  position: absolute;
  inset: -100%;
  background: url('https://i.postimg.cc/HWKMcMBL/anniu3.png') center / contain no-repeat transparent;
  pointer-events: none;
  z-index: -1;
  transform: none;
  transition: filter .15s ease;
}

.btn-system:hover::before {
  filter: brightness(1.06);
}

.btn-system:hover {
  color: #fff;
}

.btn-system:active {
  transform: translateY(2px);
}

.btn-system:disabled::before {
  filter: brightness(0.6);
}

.btn-system:disabled {
  color: #666;
  cursor: not-allowed;
}

/* 系统主按钮 - 绿色背景（用于重试等主要操作） */
.btn-system-primary {
  background: #27ae60 !important;
}

/* 系统次按钮 - 用于次要操作 */
/* 注意：.btn-system-secondary 使用默认样式，如需自定义可参考 .btn-secondary */

/* 彻底移除所有可能的线框/阴影（包括浏览器默认聚焦样式） */
.btn-core,
.btn-core:hover,
.btn-core:focus,
.btn-core:active,
.btn-core:disabled {
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
  background-color: transparent !important;
}

/* ========================================================================
   保留原有的 .btn-rpg 作为备用（暂时不删除，以防遗漏）
   ======================================================================== */
.btn-rpg {
  /* 基础布局 */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  position: relative;         /* 为遮罩做定位 */
  cursor: pointer;
  color: #eaeaea;

  /* 背景素材移至 ::before 伪元素 */
  background: transparent;

  /* 尺寸控制：保持原始宽高比，宽度根据素材调整 */
  aspect-ratio: calc(var(--btn-ratio-w) / var(--btn-ratio-h));
  width: 132px;                            /* 按钮宽度直接使用基础值 */
  height: 47px;                            /* 由宽度 + 比例推导 */
  padding: 0 var(--btn-px, 32px);          /* 文案左右留白，参与宽度计算 */
  white-space: nowrap;                     /* 不换行，避免高度突增 */

  /* 视觉：删除所有线框与投影 */
  border: none !important;
  outline: none !important;
  border-radius: 0;
  box-shadow: none !important;

  /* 文案与交互 */
  font-family: var(--font-header);
  font-size: 1rem;
  letter-spacing: 1px;
  text-shadow: 1px 1px 2px black;
  transition: filter .15s ease, transform .1s ease;
  text-transform: none;
  overflow: visible;
  clip-path: none;
}

/* 按钮背景素材 - 使用 ::before 伪元素分离控制 */
.btn-rpg::before {
  content: '';
  position: absolute;
  inset: -100%;
  background: url('https://i.postimg.cc/HWKMcMBL/anniu3.png') center / contain no-repeat transparent;
  pointer-events: none;
  z-index: -1;
  /* 背景素材缩放适应容器 */
  transform: none;
  /* 背景素材的样式可独立控制 */
  transition: filter .15s ease;
}

/* 按钮文字容器 - 使用相对定位确保文字在前 */
.btn-rpg {
  position: relative;
  z-index: 1;
}

/* 按钮在按钮容器中居中 - 保留旧的 .btn-rpg 样式以保持兼容性 */
.btn-actions .btn-rpg { 
  align-self: center; 
  width: 166px;
  max-width: 100%;
}

/* 悬停状态 - 分离控制背景和文字 */
.btn-rpg:hover::before { 
  filter: brightness(1.06);
}
.btn-rpg:hover { 
  color: #fff;
}

/* 激活状态 */
.btn-rpg:active { 
  transform: translateY(2px);
}

/* 必杀技按钮同样应用素材 - 使用与 .btn-rpg 相同的样式系统 */
.btn-ult {
  /* 继承 .btn-rpg 的所有样式 */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  position: relative;
  cursor: pointer;
  color: #eaeaea;
  background: transparent;
  aspect-ratio: calc(var(--btn-ratio-w) / var(--btn-ratio-h));
  width: calc(var(--btn-w) * var(--btn-bg-scale));
  height: auto;
  padding: 0 calc(var(--btn-px, 32px) * min(1, var(--btn-bg-scale)));
  white-space: nowrap;
  border: none !important;
  outline: none !important;
  border-radius: 0;
  box-shadow: none !important;
  font-family: var(--font-header);
  font-size: 1rem;
  letter-spacing: 1px;
  text-shadow: 1px 1px 2px black;
  transition: filter .15s ease, transform .1s ease;
  text-transform: none;
  overflow: visible;
  clip-path: none;
}

/* 必杀技按钮背景素材 */
.btn-ult::before {
  content: '';
  position: absolute;
  inset: -100%;
  background: url('https://i.postimg.cc/HWKMcMBL/anniu3.png') center / contain no-repeat transparent;
  pointer-events: none;
  z-index: -1;
  transform: none;
  transition: filter .15s ease;
}

/* 必杀技按钮禁用状态 - 与 .btn-rpg:disabled 保持一致 */
.btn-ult:disabled {
  color: #666;
  cursor: not-allowed;
}

.btn-ult:disabled::before {
  filter: brightness(0.6);
}

/* 必杀技按钮悬停和激活状态 */
.btn-ult:hover::before {
  filter: brightness(1.06);
}

.btn-ult:hover {
  color: #fff;
}

.btn-ult:active {
  transform: translateY(2px);
}

/* 彻底移除所有可能的线框/阴影（包括浏览器默认聚焦样式） */
.btn-rpg,
.btn-rpg:hover,
.btn-rpg:focus,
.btn-rpg:active,
.btn-rpg:disabled {
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
  background-color: transparent !important;
}

/* 禁用状态 - 背景变暗，文字变灰 */
.btn-rpg:disabled::before {
  filter: brightness(0.6);
}
.btn-rpg:disabled {
  color: #666;
  cursor: not-allowed;
}

.btn-rpg.btn-reset {
  margin-top: 57px;
  margin-bottom: 57px;
}

#debug-content { display:none; }

.level-splash { position:absolute; font-family: var(--font-header); font-size:5rem; color:#ffd700; text-shadow:0 0 30px #ff4500, 2px 2px 0 #000; opacity:0; pointer-events:none; z-index:30; top:50%; left:50%; transform: translate(-50%, -50%); }
@keyframes splashAnim { 0%{opacity:0; transform:translate(-50%,-50%) scale(.8);} 20%{opacity:1; transform:translate(-50%,-50%) scale(1.1);} 80%{opacity:1; transform:translate(-50%,-50%) scale(1);} 100%{opacity:0; transform:translate(-50%,-50%) scale(1.2);} }

@keyframes portrait-idle {
  0%, 24.99% { background-position: 0% 0; }
  25%, 49.99% { background-position: 33.33% 0; }
  50%, 74.99% { background-position: 66.66% 0; }
  75%, 100% { background-position: 100% 0; }
}

.modal-overlay { 
  position: fixed !important; 
  top: 0 !important;
  left: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  background-color: rgba(0,0,0,0.9) !important; 
  display: none !important; 
  justify-content: center !important; 
  align-items: center !important; 
  flex-direction: column !important; 
  z-index: 20000 !important;
  margin: 0 !important;
  padding: 0 !important;
  border: none !important;
  box-sizing: border-box !important;
  overflow: hidden !important;
}

/* 昵称模态框单独设置更高层级，确保在主菜单之上 */
#nickname-modal {
  z-index: 20001 !important;
}

/* 修复：当移除 hidden 类时，强制显示昵称模态框 */
#nickname-modal:not(.hidden) {
  display: flex !important;
}



#draft-overlay,
#shrine-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-image: url('https://i.postimg.cc/yx91Rm5B/qianghuafuwenjiemian1.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: scroll;
  z-index: 50;
  display: none;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  overflow: hidden;
  margin: 0;
  padding: 0;
  border: none;
  box-sizing: border-box;
  filter: brightness(1.05) contrast(1.08);
}

#draft-overlay::before,
#shrine-overlay::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: linear-gradient(135deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.3) 100%);
  z-index: 0;
  pointer-events: none;
}

/* 符文选择标题向上移动 */
#draft-overlay > h2,
#shrine-overlay > h2 {
  margin-top: -40px;
  margin-bottom: 36px;
  position: relative;
  z-index: 10;
  text-shadow: 0 0 20px rgba(255, 215, 0, 0.6), 0 4px 8px rgba(0, 0, 0, 0.9);
  filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.4));
  letter-spacing: 3px;
  font-size: 3.2rem;
}

/* 卡片容器向上移动 */
#draft-overlay .card-container,
#shrine-overlay .card-container {
  margin-top: 0px;
  position: relative;
  z-index: 10;
  gap: 60px;
  filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.15));
}
#leaderboard-overlay { 
  position: fixed !important; 
  top: 0 !important; 
  left: 0 !important; 
  width: 100vw !important; 
  height: 100vh !important; 
  z-index: 999998 !important; 
  background-image: url('https://i.postimg.cc/yx91Rm5B/qianghuafuwenjiemian1.png') !important;
  background-size: cover !important;
  background-position: center !important;
  background-repeat: no-repeat !important;
  background-attachment: fixed !important;
  display: none !important;
  justify-content: center !important;
  align-items: center !important;
  flex-direction: column !important;
  pointer-events: auto !important;
  margin: 0 !important;
  padding: 0 !important;
  border: none !important;
  box-sizing: border-box !important;
  overflow: hidden !important;
}

#leaderboard-overlay::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: linear-gradient(135deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.4) 100%);
  z-index: 0;
  pointer-events: none;
}

#leaderboard-overlay[style*="display: flex"] {
  display: flex !important;
}

/* 符文界面全屏覆盖强化 */
#draft-overlay[style*="display: flex"],
#shrine-overlay[style*="display: flex"] {
  display: flex;
}

/* 当死亡界面显示时，降低主UI的优先级 */
#main-ui {
  z-index: 1;
}

/* --- Ready button hitbox cleanup --- */
.ror-btn-ready { line-height: 0; position: relative; left: 8px; }
.ror-btn-ready:hover,
.ror-btn-ready:active,
.ror-btn-ready:focus {
  background: none !important;
  box-shadow: none !important;
  outline: none;
}

#lb-title { font-family: var(--font-header); font-size:3rem; letter-spacing:2px; margin-bottom:10px; }
#lb-summary { color:#aaa; font-size:1.1rem; margin-bottom:30px; }
.stats-grid { display:grid; grid-template-columns:1fr 1fr; gap:15px 25px; text-align:left; margin:20px 0 30px 0; min-width:460px; }
.stat-item { display:flex; justify-content:space-between; border-bottom:1px solid #333; padding:6px 0; font-family: var(--font-body); }
.stat-item span:first-child { color:#888; } .stat-item span:last-child { color:#ffd700; font-family: var(--font-header); }
.btn-main { background: transparent; border: none; color:#eaf2ff; }

.card-container { display:flex; gap:50px; }
.card { 
  background: linear-gradient(135deg, #2a3a4a 0%, #1e272e 100%); 
  border: none; 
  width: 240px; 
  height: 320px; 
  padding: 28px; 
  border-radius: 12px; 
  cursor: pointer; 
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); 
  display: flex; 
  flex-direction: column; 
  align-items: center; 
  text-align: center; 
  box-shadow: 0 15px 40px rgba(0,0,0,0.8), inset 0 1px 0 rgba(255,255,255,0.1); 
  position: relative;
  overflow: hidden;
}

/* 强化符文页面卡片样式覆盖 */
#draft-overlay .card,
#shrine-overlay .card {
  width: 240px;
  height: 360px;
  padding: 50px;
  background: url('https://i.postimg.cc/xTsVfPXZ/qianghuafuwen1.png') no-repeat center/100% !important;
  border: none !important;
  box-shadow: none !important;
  background-color: transparent !important;
}

.card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: transparent;
  pointer-events: none;
  z-index: 1;
}

.card:hover { 
  transform: translateY(-15px) scale(1.08); 
  border-color: transparent; 
  box-shadow: 0 0 40px rgba(255,215,0,0.5), 0 20px 50px rgba(0,0,0,0.9), inset 0 1px 0 rgba(255,255,255,0.2); 
  background: linear-gradient(135deg, #3a4a5a 0%, #2e3a42 100%);
}

.card h3 { 
  color: #5a3a1a; 
  font-family: var(--font-header); 
  margin-bottom: 15px; 
  position: relative;
  z-index: 2;
  font-size: 1.3rem;
  letter-spacing: 1px;
  text-shadow: none;
  font-weight: bold;
}

.card p { 
  color: #5a3a1a; 
  font-family: var(--font-body); 
  font-size: 1rem; 
  position: relative;
  z-index: 2;
  line-height: 1.5;
  font-weight: bold;
}

/* 强化符文界面的中文字体 */
#draft-overlay .card h3,
#shrine-overlay .card h3 {
  font-size: 1.6rem;
  letter-spacing: 1.3px;
  text-shadow: none !important;
}

#draft-overlay .card p,
#shrine-overlay .card p {
  font-size: 1.15rem;
  line-height: 1.7;
  text-shadow: none !important;
}

.card.elite { 
  border-color: transparent; 
  box-shadow: 0 0 30px rgba(255,215,0,0.5), 0 20px 50px rgba(0,0,0,0.9), inset 0 1px 0 rgba(255,255,255,0.2); 
  background: linear-gradient(135deg, #3a3025 0%, #4a4035 100%); 
}

.card.elite:hover {
  box-shadow: 0 0 50px rgba(255,215,0,0.7), 0 25px 60px rgba(0,0,0,0.95), inset 0 1px 0 rgba(255,255,255,0.3);
}

.card.disabled { 
  opacity: 0.5; 
  cursor: not-allowed; 
  border-color: #555; 
}

.card.disabled:hover { 
  transform: none; 
  border-color: #555; 
  box-shadow: 0 15px 40px rgba(0,0,0,0.8), inset 0 1px 0 rgba(255,255,255,0.1); 
}

#loading-overlay, .loading-overlay-screen { 
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: #000;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  z-index: 999999;
  transition: opacity 0.5s ease-in-out;
  opacity: 1;
  pointer-events: auto;
}

.loading-overlay-screen.hidden {
  opacity: 0;
  pointer-events: none;
  display: none;
}

.loading-overlay-screen {
  display: flex;
}

.loader { 
  border:3px solid #333; 
  border-top:3px solid var(--accent-gold); 
  border-radius:50%; 
  width:60px; 
  height:60px; 
  animation: spin 1s linear infinite; 
  margin-bottom: 40px;
}

@keyframes spin { 
  0%{ transform: rotate(0);} 
  100%{ transform: rotate(360deg);} 
}

/* Loading Progress Bar */
.loading-bar-container {
  width: 300px;
  height: 12px;
  background: rgba(100, 100, 100, 0.3);
  border: 1px solid #555;
  border-radius: 6px;
  overflow: hidden;
  margin-top: 30px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
}

#loading-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, #ffd700, #ffed4e, #ffa500);
  width: 0%;
  transition: width 0.2s ease-out;
  box-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
}

#loading-percent {
  margin-top: 15px;
  font-family: var(--font-header);
  font-size: 1.2rem;
  color: var(--accent-gold);
  letter-spacing: 1px;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
}

/* Hide main UI until loading is complete */
#main-ui {
  display: none !important;
}

#main-ui.loaded {
  display: flex !important;
}

#char-select-screen {
  display: none !important;
}

#char-select-screen.loaded {
  display: block !important;
}

/* Loading Tips Container - Bottom Left */
.loading-tips-container {
  position: absolute;
  bottom: 80px;
  left: 40px;
  display: flex;
  align-items: center;
  gap: 12px;
  font-family: var(--font-header);
  font-size: 1.1rem;
  max-width: 400px;
  animation: fadeInTip 0.5s ease-in-out;
}

.tip-label {
  color: var(--accent-gold);
  font-weight: bold;
  letter-spacing: 1px;
  text-shadow: 0 2px 4px rgba(0,0,0,0.8);
}

#loading-tip-text {
  color: #aaa;
  font-family: var(--font-body);
  font-size: 0.95rem;
  line-height: 1.4;
  text-shadow: 0 1px 2px rgba(0,0,0,0.8);
  opacity: 1;
  transition: opacity 0.25s ease-in-out;
}

@keyframes fadeInTip {
  0% { opacity: 0; transform: translateX(-10px); }
  100% { opacity: 1; transform: translateX(0); }
}

/* Loading Chase Container - Bottom Right */
.loading-chase-container {
  position: absolute;
  bottom: 0;
  right: 20px;
  width: auto;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 0px;
}

#loading-butterfly, .loading-butterfly {
  width: 128px;
  height: 64px;
  aspect-ratio: 2 / 1;
  background-image: url('https://i.postimg.cc/kXKPYW3B/hudie1.png');
  background-size: 400% 100%;
  background-repeat: no-repeat;
  background-position: 0% 0%;
  image-rendering: pixelated;
  /* 帧切换改由 JS 控制，仅保留位移动画 */
  animation: butterfly-move 3s ease-in-out infinite;
  position: relative;
  z-index: 2;
  margin-left: -32px;
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}

#loading-butterfly canvas, .loading-butterfly canvas {
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
  display: block;
  width: 100%;
  height: 100%;
}

#loading-skeleton, .loading-skeleton {
  width: 128px;
  height: 64px;
  aspect-ratio: 2 / 1;
  background-image: url('https://i.postimg.cc/fyPh8B3q/xiaokuloujiazai1.png');
  background-size: auto 100%;
  background-repeat: no-repeat;
  background-position: 0px 0px;
  image-rendering: pixelated;
  /* 仅保留位移动画，帧切换改由 JS 精确控制 */
  animation: skeleton-chase 3s ease-in-out infinite;
  position: relative;
  z-index: 1;
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}

#loading-skeleton canvas, .loading-skeleton canvas {
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
  display: block;
  width: 100%;
  height: 100%;
}

@keyframes skeleton-run {
  0%, 24.99% { background-position: 0% 0%; }
  25%, 49.99% { background-position: 33.33% 0%; }
  50%, 74.99% { background-position: 66.66% 0%; }
  75%, 100% { background-position: 100% 0%; }
}

@keyframes skeleton-chase {
  0% { transform: translateX(0); }
  50% { transform: translateX(20px); }
  100% { transform: translateX(0); }
}

@keyframes butterfly-wave {
  0%, 24.99% { background-position: 0% 0%; }
  25%, 49.99% { background-position: 33.33% 0%; }
  50%, 74.99% { background-position: 66.66% 0%; }
  75%, 100% { background-position: 100% 0%; }
}

/* 新增：蝴蝶位移动画，仅控制 transform，不再改背景位置 */
@keyframes butterfly-move {
  0% { transform: translateY(-35px) translateX(0); }
  25% { transform: translateY(-43px) translateX(15px); }
  50% { transform: translateY(-35px) translateX(30px); }
  75% { transform: translateY(-27px) translateX(15px); }
  100% { transform: translateY(-35px) translateX(0); }
}

/* Tooltip */
#tooltip { 
  position: fixed; 
  z-index: 1000000; /* 提高到最高层级，确保在所有元素之上（包括加载界面） */
  min-width: 200px; 
  max-width: 260px; 
  background: rgba(10,10,12,0.95); 
  border: 1px solid #8b7355; 
  border-left: 4px solid #d4af37; 
  color: #ddd; 
  font-family: var(--font-body); 
  font-size: .95rem; 
  padding: 10px 12px; 
  pointer-events: none; 
  box-shadow: 0 10px 30px rgba(0,0,0,0.7); 
  display: none; /* 默认隐藏 */
}
#tooltip .tt-name { color:#ffd700; font-family: var(--font-header); margin-bottom:6px; font-size:1.05rem; }
#tooltip .tt-type { color:#aaa; font-family: var(--font-body); margin-bottom:4px; font-size:0.85rem; }
#tooltip .tt-stat { color:#fff; }

/* Item Action Menu */
#item-action-menu { padding:8px 0; }
.action-menu-item { padding:10px 16px; color:#ddd; font-family: var(--font-body); font-size:0.95rem; cursor:pointer; transition: all 0.15s ease; border-bottom:1px solid rgba(255,255,255,0.05); }
.action-menu-item:last-child { border-bottom:none; }
.action-menu-item:hover { background:rgba(255,215,0,0.15); color:#ffd700; padding-left:20px; }
.action-menu-item[data-action="discard"]:hover { background:rgba(231,76,60,0.15); color:#e74c3c; }

/* Inventory Overlay (modal) */
#inventory-overlay { 
  position: fixed; 
  top: 0; 
  left: 0; 
  width: 100%; 
  height: 100%; 
  z-index: 9000; 
  background: rgba(0,0,0,0.95); 
  display: none; 
  justify-content: center; 
  align-items: center; 
  flex-direction: column; 
}
#inventory-overlay:not(.hidden) {
  display: flex !important; /* 确保打开时显示 */
}

/* Inventory Panel */
.inventory-layout { display:grid; grid-template-columns: 1fr 1fr; gap:25px;  background: url('https://i.postimg.cc/SNb51xWY/zhaungbeipanel1.png'); background-size:100% 100%; padding:168px;  box-shadow: 0 10px 30px rgba(0,0,0,0.8); }
.inventory-left, .inventory-right { min-width:320px; }


/* Titles above panel */
.inventory-wrap { display:inline-block; }
.inventory-titles { display:grid; grid-template-columns:1fr 1fr; align-items:center; margin-bottom:8px; padding:0 8px; }
.inv-equip-title, .inv-list-title { color: var(--accent-gold); font-family: var(--font-header); font-size:1.2rem; text-align:center; margin-bottom:8px; }
.inventory-titles .inv-equip-title { text-align:left; margin-bottom:0; }
.inventory-titles .inv-list-title { text-align:right; margin-bottom:0; }

/* Equip grid inside inventory */
.inv-equip-grid { display:grid; grid-template-columns: repeat(3, 80px); grid-auto-rows:80px; gap:24px; justify-content:center; margin-top:12px; margin-left:6px; }

/* Backpack grid */
.inv-grid { display:grid; grid-template-columns: repeat(5, 64px); grid-auto-rows:64px; gap:10px; justify-content:center; padding:8px; background: rgba(0,0,0,0.4); border:none; }
.inventory-right .inv-grid { margin-top:4px; }

.inv-slot { 
  width: 64px; 
  height: 64px; 
  background: url('https://i.postimg.cc/9MC9ZxXb/zhuangbeicao1.png') no-repeat center/contain; 
  border: none; 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  box-shadow: none; 
  cursor: pointer; 
  position: relative;
  pointer-events: auto; /* 确保可以接收鼠标事件 */
}
.inv-slot:hover, .inv-equip:hover { 
  outline: 2px solid #ffd700; 
  z-index: 10; /* 悬停时提升层级 */
}

/* Drag & Drop visual feedback */
.inv-slot.drag-over, .equip-socket.drag-over {
  outline: 2px solid #00ff00 !important;
  background: rgba(0,255,0,0.08);
}


.inventory-wrap { position: relative; }

.inventory-titles { display: none; }

.inventory-left,
.inventory-right { position: relative; }

.inventory-left::before {
content: "装备栏";
position: absolute;
top: -44px;
left: 0;
right: 0;
transform: none;
color: #8b5a3c;
display: block;
width: 100%;
text-align: center;
font-family: var(--font-header);
font-size: 22px; /* 使用整数像素，避免小数导致的模糊 */
letter-spacing: 1px; /* 使用整数像素 */
text-shadow: 0 1px 0 rgba(0,0,0,0.5); /* 减弱阴影，提升清晰度 */
pointer-events: none;
z-index: 1;
font-weight: 700;
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
text-rendering: geometricPrecision;
}

.inventory-right::before {
content: "背包（容量 20）";
position: absolute;
top: -44px;
left: 0;
right: 0;
transform: none;
color: #8b5a3c;
display: block;
width: 100%;
text-align: center;
font-family: var(--font-header);
font-size: 1.2rem;
letter-spacing: 0.8px;
text-shadow: 0 1px 1px rgba(0,0,0,0.6);
pointer-events: none;
z-index: 1;
font-weight: 700;
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
text-rendering: geometricPrecision;
}



#inventory-overlay .inventory-layout {
        position: relative;
        z-index: 1; 
    }
#inventory-overlay > .btn-rpg {
        position: relative;
        z-index: 2; 
        margin-top: -44px !important; 
        pointer-events: auto;
    }

/* ========================================================================
   MAIN MENU STYLES
   ======================================================================== */

.main-menu-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10000;
  overflow: hidden;
}

.menu-bg {
  position: absolute;
  inset: 0;
  background-image: url('https://i.postimg.cc/sgyGfqh0/background1.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  filter: brightness(0.7);
}

.menu-content {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: row;
  width: 100%;
  height: 100%;
  align-items: stretch;
  text-align: left;
}

/* Left Sidebar */
.menu-sidebar {
  width: 450px;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 40px 30px;
  box-sizing: border-box;
  position: relative;
}

.menu-title {
  font-family: var(--font-header);
  font-size: 3.5rem;
  font-weight: 700;
  letter-spacing: 4px;
  color: #ffd700;
  text-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
  margin: 0 0 60px 0;
  filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.3));
  text-align: center;
  width: 100%;
  flex-shrink: 0;
}

/* Menu Groups - Multi-level Menu Control */
.menu-group {
  position: absolute;
  top: 50%;
  left: 30px;
  right: 30px;
  transform: translateY(-50%);
  display: flex;
  align-items: center;
  justify-content: center;
  width: calc(100% - 60px);
  opacity: 1;
  pointer-events: auto;
  transition: opacity 0.3s ease, transform 0.3s ease;
}

.menu-group.hidden {
  opacity: 0;
  pointer-events: none;
  transform: translateY(-50%) translateX(-20px);
}

.menu-group.active {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(-50%) translateX(0);
}

.menu-buttons {
  display: flex;
  flex-direction: column;
  gap: 20px;
  align-items: center;
  width: 100%;
}

/* Right Art Display */
.menu-art-display {
  flex: 1;
  height: 100%;
  /* Background is handled by .menu-bg, this area remains clean */
}

.btn-menu {
  position: relative;
  width: 100%;
  max-width: 380px;
  height: 90px;
  padding: 0;
  font-family: var(--font-header);
  font-size: 1.2rem;
  font-weight: bold;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: #fff;
  background: url('https://i.postimg.cc/HWKMcMBL/anniu3.png') no-repeat center/contain; /* 保持原比例 */
  background-color: transparent;
  border: none;
  border-radius: 0;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: none;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
}

.btn-menu:hover:not(.disabled) {
  background-image: url('https://i.postimg.cc/HWKMcMBL/anniu3.png');
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain; /* 悬停保持原比例 */
  color: var(--accent-gold);
  filter: brightness(1.15) drop-shadow(0 0 20px rgba(255, 215, 0, 0.4));
  transform: translateY(-2px);
}

.btn-menu:active:not(.disabled) {
  transform: translateY(4px);
  filter: brightness(0.95);
}

.btn-menu.disabled {
  opacity: 0.6;
  cursor: not-allowed;
  color: #666;
  filter: brightness(0.8);
}

.btn-start {
  position: relative;
}

/* Menu button width overrides */
#btn-more {
  width: 200px;
  max-width: none;
}

#btn-settings {
  width: 200px;
  max-width: none;
}

#btn-leaderboard {
  width: 200px;
}

#btn-talents {
  width: 200px;
}

#btn-continue {
  width: 200px;
}

#btn-start-game {
  width: 200px;
}

/* ========================================================================
   MASCOT ELEMENT - JavaScript-Controlled
   ======================================================================== */
.menu-mascot {
  position: absolute;
  width: 32px;
  height: 32px;
  background-image: url('https://i.postimg.cc/cH633z0B/xiaokulou1.png');
  background-size: 400% 400%;
  background-repeat: no-repeat;
  background-position: 0% 0%;
  image-rendering: pixelated;
  opacity: 1;
  pointer-events: none;
  z-index: 10;
  /* Position and animation now controlled by JavaScript */
}

/* ========================================================================
   CHARACTER SELECTION SCREEN - Risk of Rain 2 HUD Style
   ======================================================================== */

#char-select-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: 9500;
  overflow: hidden;
}

.ror-bg {
  position: absolute;
  inset: 0;
  background-image: linear-gradient(to right, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 50%, rgba(0,0,0,0.8) 100%), url('https://i.postimg.cc/9MMMcygx/chooseherobackground1.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  filter: brightness(0.6);
}

.ror-bg::after {
  content: '';
  position: absolute;
  inset: 0;
  background: transparent;
}

/* Center Preview Sprite - Clean, Large Portrait */
.ror-center-preview {
  position: absolute;
  top: 64%;
  left: 63%;
  transform: translate(-50%, -50%);
  z-index: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  pointer-events: none;
}

.ror-preview-sprite {
  width: 280px;
  height: 350px;
  background-size: 400% 100%;
  background-repeat: no-repeat;
  background-position: 0% 0%;
  background-image: url('https://i.postimg.cc/PJBxvYD0/zhanshilihui1.png');
  image-rendering: pixelated;
  border: none !important;
  border-radius: 6px;
  box-shadow: none;
  animation: portrait-idle 1.2s linear infinite;
  position: relative;
  bottom: 60px;
}

/* ========================================================================
   TOP-LEFT: CHARACTER STRIP
   ======================================================================== */

.ror-char-strip {
  position: absolute;
  top: 40px;
  left: 40px;
  display: flex;
  gap: 10px;
  z-index: 10;
  flex-wrap: wrap;
  max-width: 400px;
}

/* ========================================================================
   英雄图标 - 专门的素材切割调整
   注意：英雄图标素材与技能图标不同，需要单独的background-size配置
   ======================================================================== */
.ror-char-icon {
  width: 72px;
  height: 72px;
  background-color: transparent;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  position: relative;
  overflow: visible;
  image-rendering: pixelated;
  /* 英雄图标专用：3列1行的精灵图，使用300% 100%确保完整显示 */
  background-size: 300% 100%;
  background-repeat: no-repeat;
  background-position: 0% 0%;
  box-shadow: none;
  z-index: 1;
}

/* UI_FRAME_CHAR overlay - 2 frames: Normal (left half), Selected (right half) */
.ror-char-icon::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url('https://i.postimg.cc/fbKtpKq9/herokuang2.png');
  background-size: 200% 100%;
  background-repeat: no-repeat;
  background-position: 0% 0%;
  pointer-events: none;
  border-radius: 6px;
  box-shadow: none;
  background-color: transparent;
  z-index: 2;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.ror-char-icon:hover {
  background-color: rgba(255, 215, 0, 0.15);
  box-shadow: 0 0 20px rgba(255, 215, 0, 0.4), 0 4px 12px rgba(0, 0, 0, 0.6);
  transform: translateY(-3px);
}

.ror-char-icon:hover::after {
  opacity: 1;
  box-shadow: inset 0 0 12px rgba(255, 215, 0, 0.3), 0 0 15px rgba(255, 215, 0, 0.3);
}

/* Active/Selected state: show right half (Gold/Selected frame) */
.ror-char-icon.active {
  background-color: rgba(255, 215, 0, 0.25);
  box-shadow: 0 0 30px rgba(255, 215, 0, 0.7), 0 4px 12px rgba(0, 0, 0, 0.6);
  transform: translateY(-4px) scale(1.08);
}

.ror-char-icon.active::after {
  opacity: 1;
  background-position: 100% 0%;
  box-shadow: inset 0 0 15px rgba(255, 215, 0, 0.4), 0 0 20px rgba(255, 215, 0, 0.5);
}

/* ========================================================================
   BOTTOM-LEFT: CHARACTER DETAILS
   ======================================================================== */

.ror-char-details {
  position: absolute;
  bottom: 30px;
  left: -20px;
  width: 700px; /* 横向拉伸 */
  background-image: url('https://i.postimg.cc/mDhf6jhV/skillintroduceoanel1.png'); /* 修正URL拼写 */
  background-size: 100% 100%; /* 保持铺满，按容器比例拉伸 */
  background-repeat: no-repeat;
  background-position: center;
  border: none;
  border-radius: 8px;
  padding: 126px 118px 110px 140px; /* 左内边距+16px，整体文字右移 */
  z-index: 10;
  box-shadow: none;
  min-height: 600px;
  display: flex;
  flex-direction: column;
  background-clip: padding-box;
  overflow: visible;
}

/* Return Button - positioned below character details panel */
.btn-return-to-menu {
  position: absolute;
  bottom: -60px;
  left: 100px;
  width: 150px;
  height: 150px;
  padding: 0;
  border: none;
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  z-index: 20;
}

.btn-return-to-menu img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  image-rendering: pixelated;
  transition: all 0.2s ease;
}

.btn-return-to-menu:hover {
  transform: scale(1.1);
  filter: brightness(1.2);
}

.btn-return-to-menu:active {
  transform: scale(0.95);
  filter: brightness(0.9);
}

/* Return Button Text Style */
.btn-return-text {
  position: absolute;
  bottom: -30px;
  left: 50%;
  transform: translateX(-50%);
  font-family: var(--font-header);
  font-size: 0.9rem;
  color: #ffffff;
  letter-spacing: 1px;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
  white-space: nowrap;
  pointer-events: none;
  font-weight: 600;
}

/* Return Button - Add "返回" text using ::after pseudo-element */
.btn-return-to-menu::after {
  content: '返回';
  position: absolute;
  bottom: -50px;
  left: 50%;
  transform: translateX(-50%);
  font-family: var(--font-header);
  font-size: 1rem;
  color: #ffffff;
  letter-spacing: 0.5px;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
  white-space: nowrap;
  pointer-events: none;
  font-weight: 600;
  z-index: 21;
}

.ror-detail-name {
  font-family: var(--font-header);
  font-size: 1.7rem;
  color: var(--accent-gold);
  margin: 0 0 12px 0;
  letter-spacing: 1.5px;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.95), 0 0 8px rgba(255, 215, 0, 0.25);
  text-transform: uppercase;
}

.ror-stats-row {
  display: flex;
  gap: 20px;
  margin-bottom: 14px;
  font-family: var(--font-body);
  font-size: 0.92rem;
  color: #e0d6c8;
  border-bottom: 1px solid rgba(255, 215, 0, 0.18);
  padding-bottom: 10px;
}

.ror-stat-item {
  flex: 1;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.85);
  font-weight: 500;
}

/* Skills Grid - 3 rows with left-aligned icons and right-aligned descriptions */
.ror-skills-grid {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: -10px; /* 上移整体技能区，不影响上方HP/攻击的样式 */
  margin-bottom: 14px;
  padding-top: 6px; /* 减少顶部内边距，进一步贴近属性行 */
}

.ror-skill-item {
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  gap: 12px;
  padding: 10px;
  background: transparent;
  border: none;
  border-radius: 4px;
  transition: all 0.2s ease;
}

.ror-skill-item:hover {
  background: transparent;
  border-color: transparent;
  box-shadow: none;
  transform: translateX(2px);
}

/* Skill Icon - 32x32px from ICONS_SKILLS grid (3x3) */
.skill-icon {
  width: 48px;
  height: 48px;
  min-width: 48px;
  background-image: url('https://i.postimg.cc/pLKsSmNP/yingxiongjinengtubiao1.png');
  background-size: 300% 300%;
  background-repeat: no-repeat;
  background-position: 0% 0%;
  image-rendering: pixelated;
  border: none;
  border-radius: 4px;
  box-shadow: none;
}

.skill-text-wrapper {
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1;
}

.skill-label {
  font-family: var(--font-header);
  font-size: 0.82rem;
  color: var(--accent-gold);
  letter-spacing: 0.5px;
  text-transform: uppercase;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.85);
  font-weight: 600;
}

.skill-desc {
  font-family: var(--font-body);
  font-size: 0.88rem;
  color: #b8a89a;
  line-height: 1.45;
  text-align: left;
  text-shadow: 0 0.5px 1px rgba(0, 0, 0, 0.6);
}

.ror-lore {
  font-family: var(--font-body);
  font-size: 0.82rem;
  color: #b8a89a;
  line-height: 1.4;
  font-style: italic;
  padding-top: 10px;
  border-top: 1px solid rgba(255, 215, 0, 0.18);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.85);
  margin-top: -24px;
}

/* ========================================================================
   RIGHT PANEL: RUN CONFIGURATION
   ======================================================================== */

.ror-run-config {
  position: absolute;
  top: 0;
  right: 0;
  height: 100%;
  width: 320px;
  background-image: url('https://i.postimg.cc/vBK3yMsR/mianban1.png');
  background-size: 100% 100%;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: scroll;
  background-color: transparent;
  border-left: none;
  padding: 50px 20px 30px 20px;
  z-index: 10;
  display: flex;
  flex-direction: column;
  gap: 14px;
  box-shadow: none;
  overflow-y: auto;
}

.ror-run-config::-webkit-scrollbar {
  width: 6px;
}

.ror-run-config::-webkit-scrollbar-track {
  background: transparent;
}

.ror-run-config::-webkit-scrollbar-thumb {
  background: #555;
  border-radius: 3px;
}

/* ===== Right panel decorative background layer ===== */
.ror-run-config { position: absolute; }
.ror-run-config .ror-panel-bg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 0;
  pointer-events: none;
  opacity: 1;
}
/* Make sure content is above the decorative layer */
.ror-run-config > *:not(.ror-panel-bg) {
  position: relative;
  z-index: 1;
}

.ror-config-header {
  font-family: var(--font-header);
  font-size: 0.9rem;
  color: var(--accent-gold);
  margin: 20px 0 12px 0;
  letter-spacing: 1px;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
  text-transform: uppercase;
  border-bottom: 1px solid rgba(255, 215, 0, 0.2);
  padding-bottom: 4px;
  text-align: center;
}

/* Difficulty Selector */
.ror-diff-selector {
  display: flex;
  align-items: center;
  gap: 80px;
  justify-content: center;
  height: 240px;
  background-image: url('https://i.postimg.cc/YqqY1jRQ/nanduxuanzelunpan1.png');
  background-size: 240px 240px;
  background-repeat: no-repeat;
  background-position: center;
  position: relative;
  padding: 16px 0;
  margin: 30px auto 0 auto;
}

.ror-btn-arrow {
  width: 44px;
  height: 44px;
  background: transparent;
  border: none;
  border-radius: 3px;
  color: #ddd;
  font-family: var(--font-header);
  font-size: 1.4rem;
  cursor: pointer;
  transition: all 0.2s ease;
  flex-shrink: 0;
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.ror-btn-arrow:hover {
  border-color: var(--accent-gold);
  background: rgba(255, 215, 0, 0.15);
  color: var(--accent-gold);
  box-shadow: 0 0 8px rgba(255, 215, 0, 0.3);
}

.ror-btn-arrow:active {
  transform: scale(0.92);
}

.ror-diff-display {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  padding: 8px 12px;
  background: transparent;
  border: none;
  border-radius: 3px;
  z-index: 1;
  cursor: pointer;
}

#ror-diff-name {
  font-family: var(--font-header);
  font-size: 1.2rem;
  color: var(--accent-gold);
  letter-spacing: 0.8px;
  font-weight: 600;
  display: block;
}

.ror-diff-desc {
  font-size: 0.7em;
  color: #aaa;
  margin-top: 4px;
  font-style: italic;
}

.ror-diff-tooltip {
  display: none;
  position: absolute;
  background: rgba(0, 0, 0, 0.95);
  color: #fff;
  padding: 10px 12px;
  border-radius: 6px;
  z-index: 1000;
  font-size: 0.85em;
  max-width: 250px;
  pointer-events: none;
  border: 1px solid rgba(255, 215, 0, 0.3);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.8);
  line-height: 1.5;
  text-align: left;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  margin-top: 8px;
  white-space: normal;
  word-wrap: break-word;
}

/* Config Section */
.ror-config-section {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-top: -4px;
}

.ror-toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  font-family: var(--font-body);
  font-size: 0.85rem;
  color: #5a3a1a;
  transition: color 0.2s ease;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.3);
  justify-content: center;
  padding: 4px 0;
  font-weight: 600;
}

.ror-toggle:hover {
  color: #8b4513;
}

.ror-toggle input[type="checkbox"] {
  width: 18px;
  height: 18px;
  cursor: pointer;
  accent-color: var(--accent-gold);
}

/* Ready Section */
.ror-ready-section {
  margin-top: auto;
  display: flex;
  flex-direction: column;
  gap: 6px;
  align-items: center; /* 水平居中按钮 */
  padding-bottom: 20px;
  justify-content: center;
  margin-bottom: -30px;
}

.ror-btn-ready {
  background: none;
  border: none;
  padding: 0;
  margin: 0;
  width: fit-content; /* 按内容(图片)自适应宽度 */
  height: auto;       /* 高度由图片决定 */
  display: inline-block;
  cursor: pointer;
}

/* 只让图片发光/变亮，避免高亮区域超出素材 */
.ror-btn-ready .ready-img {
  display: block;
  width: auto;         /* 使用素材原始宽度 */
  height: auto;        /* 保持原比例 */
  max-width: 90%;      /* 防止超出右侧面板 */
  max-height: 110px;   /* 限制高度 */
  image-rendering: auto;
  pointer-events: none; /* 避免选择文字等 */
}

.ror-btn-ready:hover .ready-img {
  filter: brightness(1.1) drop-shadow(0 0 16px rgba(255,215,0,0.55));
  transform: translateY(-1px);
}

.ror-btn-ready:active .ready-img {
  transform: translateY(1px);
  filter: brightness(0.98) drop-shadow(0 0 10px rgba(255,215,0,0.35));
}


.ror-btn-ready::before {
  content: none !important;
  display: none !important;
}

.ror-btn-ready:hover {
  filter: brightness(1.1);
  box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
  transform: translateY(-2px);
}

.ror-btn-ready:hover::before {
  opacity: 1;
}

.ror-btn-ready:active {
  transform: translateY(4px);
  box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
  filter: brightness(0.95);
}

.ror-btn-ready:disabled {
  background-color: transparent;
  color: transparent;
  cursor: not-allowed;
  opacity: 0.8;
  filter: none;
}

/* ========================================================================
   SKILL BAR UI - Overlaying bottom center of canvas
   ======================================================================== */

#skill-bar {
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  flex-direction: row;
  gap: 16px;
  z-index: 1000;
  pointer-events: auto;
  isolation: isolate;
  width: auto;
  height: auto;
  min-width: 300px;
  min-height: 80px;
  padding: 0;
  margin: 0;
  background: transparent;
}

.skill-slot {
  width: 72px;
  height: 72px;
  min-width: 72px;
  min-height: 72px;
  background: rgba(0, 0, 0, 0.6);
  border: 2px solid rgba(100, 100, 100, 0.5);
  border-radius: 0;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 0 8px rgba(0, 0, 0, 0.8);
  z-index: 1;
  isolation: isolate;
  flex-shrink: 0;
  visibility: visible;
  opacity: 1;
}

.skill-slot:hover {
  border-color: transparent;
  background: rgba(0, 0, 0, 0.8);
  box-shadow: none;
}

.skill-slot.on-cooldown {
  opacity: 0.6;
  border-color: #444;
}

/* Frame element inside slot (behind icon) */
.skill-frame {
  position: absolute;
  inset: -6px;
  background-image: url('https://i.postimg.cc/N0TsnqBF/jinengkuang1.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  z-index: 1;
  pointer-events: none;
  border: none !important;
  box-shadow: none !important;
  image-rendering: pixelated;
}

/* Skill icon inside slot */
.skill-slot .skill-icon {
  width: 60px;
  height: 60px;
  min-width: 60px; /* override global 48px */
  display: block;
  background-image: url('https://i.postimg.cc/pLKsSmNP/yingxiongjinengtubiao1.png');
  background-size: 300% 300%;
  background-repeat: no-repeat;
  background-position: 0% 0%;
  image-rendering: pixelated;
  border: 1px solid rgba(150, 150, 150, 0.3);
  border-radius: 2px;
  position: relative;
  z-index: 2; /* above frame, below cooldown */
  box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.5);
  visibility: visible;
  opacity: 1;
}



/* Cooldown overlay - fills from bottom to top */
.cooldown-overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 0%;
  background: rgba(0, 0, 0, 0.45);
  border-radius: 2px;
  transition: height 0.1s linear;
  z-index: 3; /* above icon, below key hint */
  pointer-events: none;
  border: none !important;
  box-shadow: none !important;
}

/* Key hint text in corner */
.skill-key-hint {
  position: absolute;
  top: 2px;
  right: 3px;
  font-family: var(--font-header);
  font-size: 0.65rem;
  color: #888;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
  letter-spacing: 0.3px;
  z-index: 4; /* top-most */
  pointer-events: none;
}

.skill-slot.on-cooldown .skill-key-hint {
  color: #555;
}

/* ========================================================================
   SETTINGS PANEL STYLES
   ======================================================================== */

.settings-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.85);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10001;
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
  animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    -webkit-backdrop-filter: blur(0px);
    backdrop-filter: blur(0px);
  }
  to {
    opacity: 1;
    -webkit-backdrop-filter: blur(4px);
    backdrop-filter: blur(4px);
  }
}

.settings-modal {
  width: 90%;
  max-width: 1000px;
  height: 85%;
  max-height: 700px;
  background: url('https://i.postimg.cc/QCfz1GY0/paihangbangbackground1.png') no-repeat center center;
  background-size: contain;
  border: none;
  border-radius: 0;
  box-shadow: none;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  animation: slideUp 0.3s ease-out;
  position: relative;
}

settings-overlay > div.settings-modal {
  transform: translate(-25px, 5px) !important;
  position: relative; /* 确保 z-index 生效 */
  z-index: 100; /* 可选，防止被遮挡 */
}

@keyframes slideUp {
  from {
    transform: translateY(50px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Settings Header */
.settings-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 25px 30px;
  background: transparent;
  border-bottom: none;
}

.settings-title {
  font-family: var(--font-header);
  font-size: 2.5rem;
  color: var(--accent-gold);
  margin: 0;
  letter-spacing: 2px;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8);
}

.settings-close-btn {
  width: 40px;
  height: 40px;
  background: url('https://i.postimg.cc/Hkg88mzY/chacha.png') no-repeat center/contain;
  background-color: transparent;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0;
  text-indent: -9999px;
  overflow: hidden;
}

.settings-close-btn:hover {
  transform: scale(1.1);
  filter: brightness(1.2);
}

.settings-close-btn:active {
  transform: scale(0.95);
}

/* Settings Content */
div.settings-content {
  display: flex;
  flex: 1;
  overflow: hidden;
  transform: scale(0.724, 0.756957) !important;
  position: relative; /* 确保 z-index 生效 */
  z-index: 100; /* 可选，防止被遮挡 */
}

/* Left Sidebar - Categories */
div.settings-sidebar {
  width: 200px;
  min-width: 200px;
  background: transparent;
  border-right: none;
  display: flex;
  flex-direction: column;
  gap: 10px;
  align-items: center;
  overflow-y: auto;
  padding: 10px 0;
  transform: translate(9px, 28px) !important;
  position: relative; /* 确保 z-index 生效 */
  z-index: 100; /* 可选，防止被遮挡 */
}

settings-overlay > div.settings-sidebar {
  transform: none !important;
  position: relative; /* 确保 z-index 生效 */
  z-index: 100; /* 可选，防止被遮挡 */
}

.settings-sidebar::-webkit-scrollbar {
  width: 6px;
}

.settings-sidebar::-webkit-scrollbar-track {
  background: transparent;
}

.settings-sidebar::-webkit-scrollbar-thumb {
  background: #555;
  border-radius: 3px;
}

.settings-category {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 0;
  width: 134px;
  max-width: 134px;
  height: 72px;
  margin: 0;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
  border-left: none;
  color: #8c8273;
  font-family: var(--font-body);
  font-size: 0.95rem;
  background: url('https://i.postimg.cc/HWKMcMBL/anniu3.png') no-repeat center center;
  background-size: contain;
  position: relative;
  box-sizing: border-box;
}

.settings-category:hover {
  background: url('https://i.postimg.cc/HWKMcMBL/anniu3.png') no-repeat center center;
  background-size: contain;
  filter: brightness(1.15);
  color: var(--accent-gold);
}

div.settings-category.active {
  background: url('https://i.postimg.cc/HWKMcMBL/anniu3.png') no-repeat center center;
  background-size: contain;
  filter: brightness(1.15);
  border-left: none;
  color: var(--accent-gold);
  font-weight: 600;
  position: relative; /* 确保 z-index 生效 */
  z-index: 100; /* 可选，防止被遮挡 */
}

.category-icon {
  font-size: 1.3rem;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
}

.category-name {
  flex: 1;
  text-align: center;
  white-space: nowrap;
  position: relative;
  z-index: 1;
  height: 126px;
  padding-left: 0px;
  padding-right: 0px;
  margin-top: 0px;
  margin-bottom: 0px;
  border-radius: 0px;
  border-top-left-radius: 0px;
  border-top-right-radius: 0px;
  border-bottom-right-radius: 0px;
  border-bottom-left-radius: 0px;
  vertical-align: bottom;
  line-height: 8.3;
  color: rgba(242, 242, 242, 1);
}

/* Right Panel - Settings Options */
.settings-panel {
  flex: 1;
  overflow-y: auto;
  padding: 30px 40px;
  background: transparent;
}

.settings-panel::-webkit-scrollbar {
  width: 8px;
}

.settings-panel::-webkit-scrollbar-track {
  background: transparent;
}

.settings-panel::-webkit-scrollbar-thumb {
  background: #555;
  border-radius: 4px;
}

.settings-panel::-webkit-scrollbar-thumb:hover {
  background: #777;
}

.settings-section {
  display: none;
}

.settings-section.active {
  display: block;
  animation: fadeIn 0.2s ease-out;
}

/* ========================================================================
   内联样式替代类 (Inline Style Replacements)
   ======================================================================== */

/* 隐藏元素 */
.hidden {
  display: none !important;
}

/* 标题样式 */
.modal-title {
  color: var(--accent-gold);
  font-family: var(--font-header);
  font-size: 2.5rem;
  margin-bottom: 30px;
}

.modal-title-small {
  color: var(--accent-gold);
  font-family: var(--font-header);
  font-size: 2.2rem;
  margin-bottom: 10px;
}

.modal-title-shop {
  color: var(--accent-gold);
  font-family: var(--font-header);
  font-size: 2.5rem;
  margin-bottom: 20px;
  letter-spacing: 2px;
}

/* 按钮样式 */
.btn-wide {
  width: 240px;
}

.btn-inventory-close {
  margin-top: 15px;
  width: 220px;
}

/* 弹性容器 */
.flex-center {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
  justify-content: center;
  max-width: 620px;
}

/* 加载条 */
#loading-bar-fill {
  width: 0%;
}

/* 背景图片样式 */
.ror-run-config-bg {
  background-image: url('https://i.postimg.cc/fTv3sWB2/chooseheropanel1.png');
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
}

/* 游戏结束界面 */
#game-over-content {
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* 游戏结束界面按钮容器 */
#game-over-content > div {
  margin-top: 26px;
  margin-bottom: 26px;
}

/* 重试按钮样式 */
#btn-retry-game {
  margin-left: 26px;
  margin-right: 26px;
  padding-top: 0px;
  padding-bottom: 0px;
}

/* 游戏结束界面中的按钮样式 */
#game-over-content button.btn-core {
  margin-left: 26px;
  margin-right: 26px;
  margin-top: 0px;
  margin-bottom: 0px;
}

#go-title {
  font-family: var(--font-header);
  font-size: 3rem;
  margin-bottom: 10px;
}

/* 日志条目 */
.log-entry-init {
  color: #aaa;
}

/* 血条填充 */
.hp-fill-full {
  width: 100%;
}

/* 物品菜单 */
#item-action-menu {
  position: fixed;
  z-index: 1000001; /* 提高到最高层级，在tooltip之上 */
  background: rgba(10, 10, 12, 0.98);
  border: 2px solid #8b7355;
  border-radius: 4px;
  display: none; /* 默认隐藏 */
  min-width: 160px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.9);
}

h3.section-title {
  font-family: var(--font-header);
  font-size: 1.8rem;
  color: var(--accent-gold);
  margin: 0 0 25px 0;
  padding-bottom: 12px;
  border-bottom: 2px solid rgba(255, 215, 0, 0.2);
  letter-spacing: 1px;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
  transform: translate(-23px, 28px) !important;
  position: relative; /* 确保 z-index 生效 */
  z-index: 100; /* 可选，防止被遮挡 */
}

/* Settings Items */
.settings-item {
  margin-bottom: 24px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

div.item-label {
  display: flex;
  justify-content: space-between;
  align-items: center;
  transform: translate(2px, 89px) !important;
  position: relative; /* 确保 z-index 生效 */
  z-index: 100; /* 可选，防止被遮挡 */
}

span.label-text {
  font-family: var(--font-body);
  font-size: 1rem;
  color: #e0d6c8;
  font-weight: 500;
  transform: translate(-3px, -88px) !important;
  position: relative; /* 确保 z-index 生效 */
  z-index: 100; /* 可选，防止被遮挡 */
}

.label-value {
  font-family: var(--font-header);
  font-size: 0.95rem;
  color: var(--accent-gold);
  min-width: 50px;
  text-align: right;
}

/* Slider Styles */
.slider-container {
  display: flex;
  align-items: center;
  gap: 12px;
}

.settings-slider {
  flex: 1;
  height: 6px;
  border-radius: 3px;
  background: linear-gradient(to right, #333, #555);
  outline: none;
  -webkit-appearance: none;
  appearance: none;
  cursor: pointer;
  transition: all 0.2s ease;
}

.settings-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: linear-gradient(135deg, #ffd700, #ffed4e);
  cursor: pointer;
  box-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
  transition: all 0.2s ease;
}

.settings-slider::-webkit-slider-thumb:hover {
  width: 20px;
  height: 20px;
  box-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
}

.settings-slider::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: linear-gradient(135deg, #ffd700, #ffed4e);
  cursor: pointer;
  border: none;
  box-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
  transition: all 0.2s ease;
}

.settings-slider::-moz-range-thumb:hover {
  width: 20px;
  height: 20px;
  box-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
}

.settings-slider::-moz-range-track {
  background: transparent;
  border: none;
}

.settings-slider::-moz-range-progress {
  background: linear-gradient(to right, #ffd700, #ffed4e);
  height: 6px;
  border-radius: 3px;
}

/* Checkbox Styles */
.checkbox-item {
  margin-bottom: 16px;
}

.checkbox-label {
  display: flex;
  align-items: center;
  gap: 12px;
  cursor: pointer;
  font-family: var(--font-body);
  font-size: 1rem;
  color: #e0d6c8;
  transition: all 0.2s ease;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.checkbox-label:hover {
  color: #fff;
}

.settings-checkbox {
  width: 20px;
  height: 20px;
  cursor: pointer;
  accent-color: var(--accent-gold);
  transition: all 0.2s ease;
}

.settings-checkbox:hover {
  transform: scale(1.1);
}

.checkbox-text {
  flex: 1;
}

/* Button Group (Quality Presets) */
.button-group {
  display: flex;
  gap: 10px;
  margin-top: 8px;
}

.quality-btn {
  flex: 1;
  padding: 10px 16px;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid #555;
  border-radius: 4px;
  color: #8c8273;
  font-family: var(--font-header);
  font-size: 0.95rem;
  cursor: pointer;
  transition: all 0.2s ease;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.quality-btn:hover {
  background: rgba(255, 215, 0, 0.1);
  border-color: #8b7355;
  color: #b8a89a;
}

.quality-btn.active {
  background: linear-gradient(135deg, rgba(255, 215, 0, 0.25), rgba(255, 215, 0, 0.1));
  border-color: var(--accent-gold);
  color: var(--accent-gold);
  box-shadow: 0 0 12px rgba(255, 215, 0, 0.3);
}

/* About Section */
.about-content {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.about-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid rgba(255, 215, 0, 0.1);
}

.about-label {
  font-family: var(--font-header);
  font-size: 0.95rem;
  color: var(--accent-gold);
  letter-spacing: 0.5px;
}

.about-value {
  font-family: var(--font-body);
  font-size: 0.95rem;
  color: #b8a89a;
}

.about-description {
  margin-top: 16px;
  padding-top: 16px;
  border-top: 2px solid rgba(255, 215, 0, 0.2);
}

.about-description p {
  font-family: var(--font-body);
  font-size: 0.9rem;
  color: #8c8273;
  line-height: 1.6;
  margin: 8px 0;
}

/* Settings Footer */
div.settings-footer {
  display: flex;
  justify-content: flex-end;
  gap: 15px;
  padding: 20px 30px;
  background: transparent;
  border-top: none;
  transform: translate(-305px, 4px) !important;
  position: relative; /* 确保 z-index 生效 */
  z-index: 100; /* 可选，防止被遮挡 */
}

.settings-footer .btn-rpg {
  width: auto;
  min-width: 140px;
  padding: 12px 24px;
}

/* Settings Button in Main Menu: 继承 .btn-menu，无需单独样式 */

/* ========================================================================
   BESTIARY OVERLAY STYLES - Monster Encyclopedia
   
   图鉴界面 - 完全分离的样式架构
   
   核心设计理念:
   ============
   左侧按钮列 (.bestiary-list-panel) 和右侧属性页 (.bestiary-detail-panel)
   已实现完全的样式隔离，修改一方不会对另一方产生任何影响。
   
   架构分层:
   =========
   1. .bestiary-overlay          - 全屏覆盖层（最外层）
   2. .bestiary-modal            - 模态框容器
   3. .bestiary-header           - 标题栏（独立）
   4. .bestiary-content          - 内容容器（flex 布局，gap: 0）
      ├─ .bestiary-list-panel    - 左侧面板（完全独立）
      └─ .bestiary-detail-panel  - 右侧面板（完全独立）
   5. .bestiary-footer           - 页脚（独立）
   
   独立性保证:
   ===========
   ✓ 左侧面板的 margin/padding 不会影响右侧
   ✓ 右侧面板的 margin/padding 不会影响左侧
   ✓ 左侧面板的 width 不会影响右侧的 flex: 1 计算
   ✓ 两个面板各自管理自己的滚动条
   ✓ 两个面板各自管理自己的背景色
   ✓ 两个面板各自管理自己的内容布局
   
   调整指南:
   =========
   
   【调整左侧面板】
   修改 .bestiary-list-panel 中的:
   - width: 改变列表宽度
   - padding: 改变列表内边距
   - margin: 改变列表外边距
   - gap: 改变按钮间距
   - background: 改变背景色
   
   示例 - 左侧面板:
   修改 width: 350px (从 300px 改为 350px)
   修改 padding: 20px 15px (从 18px 10px 改为 20px 15px)
   修改 margin: 30px (从 20px 改为 30px)
   修改 gap: 10px (从 6px 改为 10px)
   修改 background: rgba(0,0,0,0.2) (添加背景)
   
   【调整右侧面板】
   修改 .bestiary-detail-panel 中的:
   - flex: 改变宽度比例（1 = 占用剩余空间）
   - padding: 改变内边距
   - margin: 改变外边距
   - gap: 改变内容块间距
   - background: 改变背景色
   
   示例 - 右侧面板:
   修改 padding: 35px 40px (从 28px 32px 改为 35px 40px)
   修改 margin: 30px (从 20px 改为 30px)
   修改 gap: 20px (从 16px 改为 20px)
   修改 background: rgba(0,0,0,0.15) (添加背景)
   
   ======================================================================== */

.bestiary-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.85);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10001;
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
  animation: fadeIn 0.3s ease-out;
}

.bestiary-modal {
  width: 90%;
  max-width: 1200px;
  height: 85%;
  max-height: 750px;
  background: url('https://i.postimg.cc/ncJBncyb/bookbackground1.png') center/cover no-repeat;
  border: none;
  border-radius: 8px;
  box-shadow: 0 0 60px rgba(0, 0, 0, 0.95), inset 0 0 30px rgba(255, 215, 0, 0.05);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  animation: slideUp 0.3s ease-out;
}

/* Bestiary Header */
.bestiary-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 22px 180px;
  background: transparent;
  border-bottom: none;
  box-shadow: none;
}

.bestiary-title {
  font-family: var(--font-header);
  font-size: 2.6rem;
  color: var(--accent-gold);
  margin: 0;
  letter-spacing: 2.3px;
  text-shadow: 0 3px 10px rgba(0, 0, 0, 0.9), 0 0 15px rgba(255, 215, 0, 0.3);
  filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.2));
}

.bestiary-close-btn {
  width: 44px;
  height: 44px;
  background: url('https://i.postimg.cc/Hkg88mzY/chacha.png') no-repeat center/contain;
  background-color: transparent;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0;
  text-indent: -9999px;
  overflow: hidden;
}

.bestiary-close-btn:hover {
  transform: scale(1.1);
  filter: brightness(1.2);
}

.bestiary-close-btn:active {
  transform: scale(0.95);
}

/* ========================================================================
   Bestiary Content - 主容器（完全分离的布局容器）
   
   功能: 作为左侧列表面板和右侧详情面板的容器
   
   设计原则:
   - 使用 flex 布局，gap: 0 确保两个面板之间没有自动间距
   - 两个子面板各自管理自己的 margin，完全独立
   - 不对子面板的尺寸、内边距、外边距进行任何约束
   - 允许子面板自由扩展或收缩
   
   重要: 此容器仅负责基础布局，不干涉子面板的样式
   
   ======================================================================== */
.bestiary-content {
  display: flex;
  flex: 1;
  overflow: hidden;
  gap: 0;
  padding: 0;
  background: transparent;
  border: none;
  box-shadow: none;
}

/* ========================================================================
   左侧列表面板 - 独立样式结构 (LEFT PANEL - BUTTONS COLUMN)
   
   功能: 管理怪物列表按钮的显示、布局、滚动等
   
   可独立调整的属性:
   - width: 面板宽度（当前 300px）
   - padding: 内边距（当前 18px 10px）
   - margin: 外边距（当前 20px）
   - gap: 列表项之间的间距（当前 6px）
   - background: 背景色/图片
   - border/border-radius: 边框样式
   - overflow-y: 滚动行为
   
   重要: 调整这些属性 ✓ 不会影响右侧详情面板
   
   示例修改:
   - 增加宽度: width: 350px;
   - 增加间距: gap: 10px;
   - 添加背景: background: rgba(0,0,0,0.3);
   - 修改内边距: padding: 20px 15px;
   
   ======================================================================== */
.bestiary-list-panel {
  /* 容器尺寸 - 独立控制 */
  width: 550px;
  flex-shrink: 0;
  
  /* 内部布局 - 独立控制 */
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  
  /* 内外边距 - 独立控制（完全独立，不与右侧面板共享任何margin） */
  padding: 12px 10px;
  margin: 20px;
  
  /* 背景与视觉 - 独立控制 */
  background: transparent;
  border: none;
  border-radius: 4px;
  box-shadow: none;
  
  /* 滚动行为 - 独立控制 */
  overflow-y: auto;
  overflow-x: hidden;
}

.bestiary-list-panel::-webkit-scrollbar {
  display: none;
}

.bestiary-list-panel::-webkit-scrollbar-track {
  display: none;
}

.bestiary-list-panel::-webkit-scrollbar-thumb {
  display: none;
}

.bestiary-list-panel::-webkit-scrollbar-thumb:hover {
  display: none;
}

/* ========================================================================
   左侧列表容器 - 列表项的父容器（完全独立）
   
   功能: 管理左侧面板内的列表项布局
   
   重要: 此容器及其所有子元素的样式修改 ✓ 不会影响右侧详情面板
   
   可调整的属性:
   - gap: 列表项间距（当前 6px）
   - align-items: 对齐方式（当前 center）
   - width: 容器宽度（当前 100%）
   
   ======================================================================== */
.bestiary-list {
  display: flex;
  flex-direction: column;
  gap: 26px;
  align-items: center;
  width: 100%;
}

/* ========================================================================
   左侧列表项 - 怪物按钮样式（独立控制）
   
   可调整的属性:
   - width: 按钮宽度（当前 240px）
   - font-size: 文字大小（当前 0.85rem）
   - color: 文字颜色（当前 #eaeaea）
   - letter-spacing: 字间距（当前 0.7px）
   - padding: 内边距（当前 0 22px）
   - background (::before): 背景素材
   - transition: 过渡效果
   
   示例修改:
   - 增加宽度: width: 260px;
   - 增加字体: font-size: 0.95rem;
   - 改变颜色: color: #ffd700;
   - 修改背景: 在 ::before 中改变 background URL
   
   ======================================================================== */
.bestiary-list-item {
  /* 基础布局 - 参考 .btn-rpg */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  position: relative;
  cursor: pointer;
  color: #eaeaea;

  /* 背景素材移至 ::before 伪元素 */
  background: transparent;

  /* 尺寸控制：保持原始宽高比，宽度根据素材调整 */
  aspect-ratio: calc(var(--btn-ratio-w) / var(--btn-ratio-h));
  width: 340px;
  height: auto;
  padding: 0 var(--btn-px, 22px);
  white-space: nowrap;

  /* 视觉：删除所有线框与投影 */
  border: none !important;
  outline: none !important;
  border-radius: 0;
  box-shadow: none !important;

  /* 文案与交互 */
  font-family: var(--font-header);
  font-size: 0.85rem;
  letter-spacing: 0.7px;
  text-shadow: 1px 1px 2px black;
  transition: filter .15s ease, transform .1s ease;
  text-transform: none;
  overflow: visible;
  clip-path: none;
}

/* 按钮背景素材 - 使用 ::before 伪元素分离控制 */
.bestiary-list-item::before {
  content: '';
  position: absolute;
  inset: -100%;
  background: url('https://i.postimg.cc/HWKMcMBL/anniu3.png') center / contain no-repeat transparent;
  pointer-events: none;
  z-index: -1;
  transform: none;
  transition: filter .15s ease;
}

/* 按钮文字容器 - 使用相对定位确保文字在前 */
.bestiary-list-item {
  position: relative;
  z-index: 1;
}

/* 悬停状态 - 分离控制背景和文字 */
.bestiary-list-item:hover::before {
  filter: brightness(1.08);
}

.bestiary-list-item:hover {
  color: #fff;
  transform: translateY(-1px);
}

/* 激活状态 */
.bestiary-list-item:active {
  transform: translateY(1px);
}

/* 选中状态 - 高亮显示 */
.bestiary-list-item.active {
  color: var(--accent-gold);
}

.bestiary-list-item.active::before {
  filter: brightness(1.12);
}

/* 彻底移除所有可能的线框/阴影（包括浏览器默认聚焦样式） */
.bestiary-list-item,
.bestiary-list-item:hover,
.bestiary-list-item:focus,
.bestiary-list-item:active {
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
  background-color: transparent !important;
}

/* ========================================================================
   右侧详情面板 - 独立样式结构 (RIGHT PANEL - PROPERTIES PAGE)
   
   功能: 管理怪物属性、信息、背景故事的显示和布局
   
   可独立调整的属性:
   - flex: 面板宽度比例（当前 flex: 1 表示占用剩余空间）
   - padding: 内边距（当前 28px 32px）
   - margin: 外边距（当前 20px）
   - gap: 内容区块之间的间距（当前 16px）
   - background: 背景色/图片
   - border/border-radius: 边框样式
   - overflow-y: 滚动行为
   
   重要: 调整这些属性 ✓ 不会影响左侧列表面板
   
   示例修改:
   - 增加内边距: padding: 35px 40px;
   - 增加间距: gap: 20px;
   - 添加背景: background: rgba(0,0,0,0.2);
   - 修改外边距: margin: 20px 30px;
   
   ======================================================================== */
.bestiary-detail-panel {
  /* 容器尺寸 - 独立控制 */
  flex: 1;
  flex-shrink: 1;
  
  /* 内部布局 - 独立控制 */
  display: flex;
  flex-direction: column;
  gap: 16px;
  
  /* 内外边距 - 独立控制（完全独立，不与左侧面板共享任何margin） */
  padding: 20px 100px;
  margin: 20px;
  
  /* 背景与视觉 - 独立控制 */
  background: transparent;
  border: none;
  border-radius: 4px;
  box-shadow: none;
  
  /* 滚动行为 - 独立控制 */
  overflow-y: auto;
  overflow-x: hidden;
}

.bestiary-detail-panel::-webkit-scrollbar {
  display: none;
}

.bestiary-detail-panel::-webkit-scrollbar-track {
  display: none;
}

.bestiary-detail-panel::-webkit-scrollbar-thumb {
  display: none;
}

.bestiary-detail-panel::-webkit-scrollbar-thumb:hover {
  display: none;
}

/* ========================================================================
   右侧内容区域 - 怪物肖像容器（完全独立）
   
   功能: 显示怪物肖像的容器
   
   重要: 此容器的样式修改 ✓ 不会影响左侧列表面板
   
   可调整的属性:
   - width: 容器宽度（当前 100%）
   - height: 容器高度（当前 220px）
   - background: 背景色
   - border-radius: 圆角（当前 6px）
   
   示例修改:
   - 增加高度: height: 280px;
   - 添加背景: background: rgba(0,0,0,0.2);
   - 改变圆角: border-radius: 8px;
   
   ======================================================================== */
.bestiary-portrait-container {
  width: 100%;
  height: 220px;
  background: transparent;
  border: none;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  position: relative;
  box-shadow: none;
}

.bestiary-portrait-container canvas {
  max-width: 100%;
  max-height: 100%;
  image-rendering: pixelated;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
}

/* ========================================================================
   右侧内容区域 - 属性网格（完全独立）
   
   功能: 显示怪物属性数值的网格
   
   重要: 此容器的样式修改 ✓ 不会影响左侧列表面板
   
   可调整的属性:
   - grid-template-columns: 列数（当前 repeat(4, 1fr) = 4列）
   - gap: 网格间距（当前 6px）
   - padding: 内边距（当前 16px）
   - background: 背景色
   - border-radius: 圆角（当前 6px）
   
   示例修改:
   - 改为2列: grid-template-columns: repeat(2, 1fr);
   - 改为3列: grid-template-columns: repeat(3, 1fr);
   - 增加间距: gap: 10px;
   - 添加背景: background: rgba(0,0,0,0.15);
   
   ======================================================================== */
.bestiary-stats-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 6px;
  padding: 16px;
  background: transparent;
  border: none;
  border-radius: 6px;
  box-shadow: none;
}

.bestiary-stats-grid .stat-grid-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 12px;
  background: transparent;
  border: none;
  border-radius: 6px;
  position: relative;
  overflow: hidden;
  box-shadow: none;
}

.bestiary-stats-grid .stat-grid-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: transparent;
  opacity: 0;
  pointer-events: none;
  border-radius: 6px;
}

/* 属性网格 - 标签样式 */
.bestiary-stats-grid .stat-grid-label {
  font-family: var(--font-header);
  font-size: 0.75rem;
  color: var(--accent-gold);
  letter-spacing: 0.5px;
  text-transform: uppercase;
  text-shadow: 0 2px 3px rgba(0, 0, 0, 0.9);
  position: relative;
  z-index: 1;
  font-weight: 600;
}

/* 属性网格 - 数值样式 */
.bestiary-stats-grid .stat-grid-value {
  font-family: var(--font-header);
  font-size: 1.25rem;
  color: #ffd700;
  font-weight: bold;
  text-shadow: 0 2px 5px rgba(0, 0, 0, 0.95), 0 0 8px rgba(255, 215, 0, 0.2);
  position: relative;
  z-index: 1;
}

/* ========================================================================
   右侧内容区域 - 怪物信息区（完全独立）
   
   功能: 显示怪物身高、体重、速度等信息
   
   重要: 此容器的样式修改 ✓ 不会影响左侧列表面板
   
   可调整的属性:
   - gap: 行间距（当前 4px）
   - padding: 内边距（当前 14px）
   - background: 背景色
   - border-radius: 圆角（当前 6px）
   
   示例修改:
   - 增加行间距: gap: 8px;
   - 增加内边距: padding: 18px;
   - 添加背景: background: rgba(0,0,0,0.1);
   
   ======================================================================== */
.bestiary-info-section {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 14px;
  background: transparent;
  border: none;
  border-radius: 6px;
  box-shadow: none;
}

/* 信息行 - 每一行的样式 */
.info-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 0;
  border-bottom: none;
}

.info-row:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

/* 信息标签 - 左侧标签样式 */
.info-label {
  font-family: var(--font-header);
  font-size: 0.9rem;
  color: var(--accent-gold);
  letter-spacing: 0.5px;
  text-shadow: 0 2px 3px rgba(0, 0, 0, 0.8);
  font-weight: 600;
}

/* 信息值 - 右侧数值样式 */
.info-value {
  font-family: var(--font-body);
  font-size: 0.9rem;
  color: #e8d4a0;
  font-weight: 500;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
}

/* ========================================================================
   右侧内容区域 - 怪物背景故事区（完全独立）
   
   功能: 显示怪物的背景故事和描述
   
   重要: 此容器的样式修改 ✓ 不会影响左侧列表面板
   
   可调整的属性:
   - gap: 标题与内容间距（当前 10px）
   - flex: 1: 占用剩余空间
   - min-height: 最小高度（当前 160px）
   
   示例修改:
   - 增加间距: gap: 15px;
   - 增加最小高度: min-height: 200px;
   
   ======================================================================== */
.bestiary-lore-section {
  display: flex;
  flex-direction: column;
  gap: 10px;
  flex: 1;
  min-height: 160px;
}

.lore-title {
  font-family: var(--font-header);
  font-size: 1.3rem;
  color: var(--accent-gold);
  margin: 0;
  letter-spacing: 1.1px;
  text-shadow: 0 3px 6px rgba(0, 0, 0, 0.95), 0 0 10px rgba(255, 215, 0, 0.2);
  padding-bottom: 10px;
  border-bottom: none;
  font-weight: 700;
}

.lore-text {
  font-family: var(--font-body);
  font-size: 0.9rem;
  color: #e8d4a0;
  line-height: 1.8;
  padding: 16px;
  background: transparent;
  border: none;
  border-radius: 6px;
  overflow-y: auto;
  flex: 1;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.9);
  box-shadow: none;
}

.lore-text::-webkit-scrollbar {
  width: 6px;
}

.lore-text::-webkit-scrollbar-track {
  background: transparent;
  border-radius: 3px;
}

.lore-text::-webkit-scrollbar-thumb {
  background: linear-gradient(to bottom, rgba(255, 215, 0, 0.5), rgba(255, 215, 0, 0.3));
  border-radius: 3px;
  box-shadow: inset 0 0 3px rgba(0, 0, 0, 0.4);
}

.lore-text::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(to bottom, rgba(255, 215, 0, 0.7), rgba(255, 215, 0, 0.5));
}

/* Bestiary Footer */
.bestiary-footer {
  display: flex;
  justify-content: center;
  gap: 18px;
  padding: 20px 28px;
  background: transparent;
  border-top: none;
  box-shadow: none;
  margin: 0 20px 20px 20px;
  border-radius: 6px;
}

.bestiary-footer .btn-rpg {
  width: 220px;
  height: auto;
  padding: 0 26px;
  aspect-ratio: calc(var(--btn-ratio-w) / var(--btn-ratio-h));
  background: transparent;
  color: #eaeaea;
  font-weight: 600;
  transition: all 0.2s ease;
  font-size: 0.9rem;
}

.bestiary-footer .btn-rpg::before {
  background: url('https://i.postimg.cc/HWKMcMBL/anniu3.png') center / contain no-repeat transparent;
}

.bestiary-footer .btn-rpg:hover {
  color: #fff;
}

.bestiary-footer .btn-rpg:hover::before {
  filter: brightness(1.08);
}

/* ========================================
   赌徒界面样式 (Gambler UI)
   ======================================== */

.gambler-panel {
  background: linear-gradient(135deg, #1a0f0f 0%, #2d1a1a 50%, #1a0f0f 100%);
  border: 3px solid #ffd700;
  border-radius: 15px;
  padding: 30px;
  max-width: 500px;
  margin: auto;
  box-shadow: 0 10px 40px rgba(255, 215, 0, 0.3),
              inset 0 2px 10px rgba(255, 215, 0, 0.1);
  position: relative;
  overflow: hidden;
}

.gambler-panel::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255, 215, 0, 0.05) 0%, transparent 70%);
  animation: rotate-glow 10s linear infinite;
  pointer-events: none;
}

@keyframes rotate-glow {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.7; transform: scale(1.05); }
}

/* 赌徒消息文本 */
#gambler-message {
  position: relative;
  z-index: 1;
  text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.8),
               0 0 10px rgba(255, 204, 0, 0.5);
}

/* 旋转动画 */
#gambler-spin-animation {
  position: relative;
  z-index: 1;
  animation: pulse 0.5s infinite;
  text-shadow: 2px 2px 6px rgba(255, 102, 0, 0.8),
               0 0 15px rgba(255, 102, 0, 0.6);
}

/* 结果显示 */
#gambler-result {
  position: relative;
  z-index: 1;
  animation: result-appear 0.5s ease-out;
}

@keyframes result-appear {
  from { 
    opacity: 0; 
    transform: translateY(-20px) scale(0.8); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0) scale(1); 
  }
}

/* 赌徒按钮样式 */
.gambler-panel .btn-rpg {
  position: relative;
  z-index: 1;
  transition: all 0.3s ease;
}

.gambler-panel .btn-rpg:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
}

.gambler-panel .btn-rpg:active:not(:disabled) {
  transform: translateY(0);
}

.gambler-panel .btn-rpg:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  filter: grayscale(0.5);
}

/* 标准旋转按钮特效 */
#gambler-btn-standard {
  box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4);
}

#gambler-btn-standard:hover:not(:disabled) {
  box-shadow: 0 6px 25px rgba(52, 152, 219, 0.6);
}

/* 豪赌旋转按钮特效 */
#gambler-btn-high-roller {
  box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);
}

#gambler-btn-high-roller:hover:not(:disabled) {
  box-shadow: 0 6px 25px rgba(231, 76, 60, 0.6);
}



/* ========================================================================
   天赋树UI样式 (Talent Tree UI Styles)
   ======================================================================== */

/* 天赋树全屏覆盖层 */
.talent-tree-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background-image: url('https://i.postimg.cc/2jwf0wrt/startpanel1.png') !important;
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;
  background-color: transparent;
}

/* 天赋树 Header 区域 - 统一顶部栏 */
.talent-tree-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 40px;
  background: rgba(0, 0, 0, 0.7);
  border-bottom: 2px solid rgba(255, 215, 0, 0.3);
  z-index: 10;
  position: relative;
  flex-shrink: 0;
}

.talent-tree-header h2 {
  margin: 0;
  color: #ffd700;
  font-size: 28px;
  font-family: var(--font-header);
  text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
  letter-spacing: 2px;
}

.talent-tree-header p {
  margin: 5px 0 0 0;
  color: #aaa;
  font-size: 14px;
  font-family: var(--font-body);
}

/* 天赋树主容器 - Canvas 和节点容器 */
.talent-tree-container {
  flex: 1;
  position: relative;
  overflow: hidden;
  background-color: transparent; /* 透明背景，让 overlay 的背景图片显示 */
  z-index: 0; /* Canvas 层 */
}

/* Canvas 层 - 绘制连接线，位于最底层，背景透明 */
.talent-tree-container canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 0;
  background-color: transparent;
}

/* 节点容器 - DOM 节点，位于 Canvas 之上 */
.talent-node-container {
  position: absolute;
  top: 50%;
  left: 50%;
  transform-origin: center center;
  pointer-events: none;
  z-index: 10; /* DOM 节点层 */
}

/* 统计面板 - 位于上层 */
.talent-stats-panel {
  position: absolute;
  bottom: 20px;
  right: 20px;
  background-image: url('https://i.postimg.cc/DwtjkRfk/xingtukuang1.png');
  background-size: 100% 100%;
  background-repeat: no-repeat;
  background-position: center;
  background-color: transparent;
  border: none;
  border-radius: 0;
  padding: 23px 20px;
  color: #fff;
  min-width: 250px;
  max-height: 400px;
  overflow-y: auto;
  z-index: 20; /* UI 面板层 */
  box-shadow: none;
  height: 146px;
  width: 219px;
  margin-top: 0px;
  margin-bottom: 0px;
}

/* 天赋树按钮样�?*/
/* .btn-talents 样式已移除，现在继承 .btn-menu 的通用样式 */

/* 天赋树节点动画增�?*/
/* 天赋树节点 - 移除默认边框和背景，只显示圆形素材图片 */
.talent-node {
  will-change: transform;
  border: none !important;
  background-color: transparent !important;
  border-radius: 50% !important;
  position: relative;
  /* 发光效果由 ::before 伪元素实现，位于素材图片下方 */
}

/* 发光层 - 位于节点素材下方，纯粹的发光球体 */
.talent-node::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: transparent;
  pointer-events: none;
  z-index: -1; /* 确保在素材图片下方 */
  opacity: 0;
  transition: opacity 0.2s, box-shadow 0.2s;
}

/* 已解锁节点的发光效果 - 从内而外散发光芒的纯粹发光球体 */
.talent-node.talent-node-allocated::before {
  opacity: 1;
  box-shadow: 0 0 20px -12px var(--glow-color, #ffd700), 0 0 30px -8px var(--glow-color, #ffd700); /* 从内而外散发光芒，无边框 */
}

/* Hover 时增强发光效果 */
.talent-node.talent-node-allocated.talent-node-hover::before {
  box-shadow: 0 0 25px -10px var(--glow-color, #ffd700), 0 0 35px -6px var(--glow-color, #ffd700); /* hover 时增强发光 */
}

.talent-node:hover {
  animation: talentNodePulse 1s infinite;
  border: none !important;
  background-color: transparent !important;
}

.talent-node.active,
.talent-node:active {
  border: none !important;
  background-color: transparent !important;
}

@keyframes talentNodePulse {
  0%, 100% {
    filter: brightness(1);
  }
  50% {
    filter: brightness(1.3);
  }
}

/* 天赋树统计面板滚动条样式 */
.talent-stats-panel::-webkit-scrollbar {
  width: 6px;
}

.talent-stats-panel::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.3);
  border-radius: 3px;
}

.talent-stats-panel::-webkit-scrollbar-thumb {
  background: rgba(255, 215, 0, 0.5);
  border-radius: 3px;
}

.talent-stats-panel::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 215, 0, 0.7);
}

/* 天赋树工具提示增�?*/
.talent-tooltip {
  animation: tooltipFadeIn 0.2s ease-out;
}

@keyframes tooltipFadeIn {
  from {
    opacity: 0;
    transform: translateY(-5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 灵魂水晶显示 - 位于 Header 区域 */
.talent-sc-display {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 20px;
  color: var(--accent-gold);
  font-weight: bold;
  text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
  z-index: 20;
  position: relative;
}

.talent-sc-display img {
  width: 28px;
  height: 28px;
  object-fit: contain;
  filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.6));
}

/* 移除紫色发光动画，改用金色主题 */
/*
@keyframes crystalShimmer {
  0%, 100% {
    text-shadow: 0 0 10px rgba(187, 0, 255, 0.8), 0 0 20px rgba(187, 0, 255, 0.4);
  }
  50% {
    text-shadow: 0 0 15px rgba(187, 0, 255, 1), 0 0 30px rgba(187, 0, 255, 0.6), 0 0 40px rgba(187, 0, 255, 0.3);
  }
}
*/

/* 天赋树关闭按钮动�?*/
/* 天赋树关闭按钮 */
.talent-close-btn {
  width: 50px;
  height: 50px;
  background: url('https://i.postimg.cc/Hkg88mzY/chacha.png') no-repeat center/contain;
  background-color: transparent;
  border: none;
  cursor: pointer;
  transition: all 0.2s;
  z-index: 30;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0;
  text-indent: -9999px;
  overflow: hidden;
}

.talent-close-btn:hover {
  transform: scale(1.1);
  filter: brightness(1.2);
}

.talent-close-btn:active {
  transform: scale(0.95);
}

/* 移除原来的浮动动画，使用更简洁的交互效果 */
/*
@keyframes float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-5px);
  }
}
*/

/* 响应式调�?*/
@media (max-width: 1600px) {
  .talent-stats-panel {
    min-width: 200px !important;
    font-size: 13px;
  }
}

@media (max-width: 1200px) {
  .talent-tree-header {
    flex-direction: column !important;
    gap: 15px;
  }
  
  .talent-stats-panel {
    position: relative !important;
    bottom: auto !important;
    right: auto !important;
    margin: 20px auto;
  }
}

/* 天赋节点发光效果增强 - 根节点和关键节点使用动画发光 */
.talent-node-root.talent-node-allocated::before,
.talent-node-keystone.talent-node-allocated::before {
  animation: nodeGlow 2s ease-in-out infinite;
}

@keyframes nodeGlow {
  0%, 100% {
    box-shadow: 0 0 15px -10px var(--glow-color, #ffffff), 0 0 25px -6px var(--glow-color, #ffffff); /* 纯粹的从内而外散发光芒的发光球体 */
  }
  50% {
    box-shadow: 0 0 25px -8px var(--glow-color, #ffffff), 0 0 35px -4px var(--glow-color, hsl(0, 0%, 100%)), 0 0 45px -2px var(--glow-color, #ffd700); /* 增强的纯粹发光球体 */
  }
}

/* ======================================================================== */
/* 排行榜面板样式 */
/* ======================================================================== */
.leaderboard-panel {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(5px);
  z-index: 10000;
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 1;
  transition: opacity 0.3s ease;
}

#leaderboard-panel {
  height: 767px;
}

.leaderboard-panel.hidden {
  display: none;
  opacity: 0;
}

.leaderboard-content {
  width: 90%;
  max-width: 1000px;
  height: 80%;
  max-height: 700px;
  background: url('https://i.postimg.cc/QCfz1GY0/paihangbangbackground1.png') no-repeat center;
  background-size: contain;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
  transform: scale(1.072, 1.06218) !important;
  z-index: 100; /* 可选，防止被遮挡 */
}

div.leaderboard-content {
  height: 608px;
}

leaderboard-panel > div.leaderboard-content {
  transform: scale(1.072, 1.06218) !important;
  position: relative; /* 确保 z-index 生效 */
  z-index: 100; /* 可选，防止被遮挡 */
}

.leaderboard-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 30px;
  background: transparent;
  position: relative;
  z-index: 1;
}

.leaderboard-header h2 {
  margin: 0;
  color: var(--accent-gold);
  font-family: var(--font-header);
  font-size: 32px;
  text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

button.leaderboard-close-btn {
  width: 40px;
  height: 40px;
  background: url('https://i.postimg.cc/Hkg88mzY/chacha.png') no-repeat center/contain;
  background-color: transparent;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0;
  text-indent: -9999px;
  overflow: hidden;
  transform: none !important;
  position: relative; /* 确保 z-index 生效 */
  z-index: 100; /* 可选，防止被遮挡 */
}

.leaderboard-close-btn:hover {
  transform: scale(1.1);
  filter: brightness(1.2);
}

.leaderboard-close-btn:active {
  transform: scale(0.95);
}

div.leaderboard-filters {
  display: flex;
  gap: 10px;
  padding: 12px 30px;
  background: transparent;
  position: relative;
  z-index: 100; /* 可选，防止被遮挡 */
  transform: translate(312px, 461px) !important;
}

.filter-btn {
  padding: 8px 20px;
  background: #1a1410;
  border: 2px solid var(--border-color);
  border-radius: 5px;
  color: var(--text-dim);
  font-family: var(--font-body);
  font-size: 16px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.filter-btn:hover {
  background: #2a1f15;
  color: var(--text-main);
  border-color: var(--accent-gold);
}

button.filter-btn.active {
  background: linear-gradient(135deg, #ffd700, #ffa500);
  border-color: #ffd700;
  color: #000;
  font-weight: bold;
  transform: none !important;
  position: relative; /* 确保 z-index 生效 */
  z-index: 100; /* 可选，防止被遮挡 */
}

.leaderboard-table-wrapper {
  flex: 1;
  overflow-y: auto;
  padding: 20px 30px;
  position: relative;
  z-index: 1;
}

table.leaderboard-table {
  width: 100%;
  border-collapse: collapse;
  font-family: var(--font-body);
  background: transparent;
  transform: translate(11px, -29px) scale(0.755319, 0.85567) !important;
  position: relative; /* 确保 z-index 生效 */
  z-index: 100; /* 可选，防止被遮挡 */
}

.leaderboard-table thead {
  position: sticky;
  top: 0;
  background: transparent;
  z-index: 10;
}

.leaderboard-table th {
  padding: 12px 15px;
  text-align: left;
  color: var(--accent-gold);
  font-weight: bold;
  font-size: 18px;
  border-bottom: 2px solid var(--border-color);
  text-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
}

.leaderboard-table tbody tr {
  transition: all 0.3s ease;
  cursor: pointer;
  border-bottom: 1px solid rgba(44, 36, 27, 0.3);
}

.leaderboard-table tbody tr:hover {
  background: rgba(255, 215, 0, 0.1);
  transform: translateX(5px);
}

.leaderboard-table td {
  padding: 12px 15px;
  color: var(--text-main);
  font-size: 16px;
}

td.character-cell {
  transform: translate(-1px, 0px) !important;
  position: relative; /* 确保 z-index 生效 */
  z-index: 100; /* 可选，防止被遮挡 */
}

.leaderboard-row.rank-1 {
  background: linear-gradient(90deg, rgba(255, 215, 0, 0.15), transparent);
  border-left: 4px solid #ffd700;
}

.leaderboard-row.rank-2 {
  background: linear-gradient(90deg, rgba(192, 192, 192, 0.15), transparent);
  border-left: 4px solid #c0c0c0;
}

.leaderboard-row.rank-3 {
  background: linear-gradient(90deg, rgba(205, 127, 50, 0.15), transparent);
  border-left: 4px solid #cd7f32;
}

.rank-cell {
  font-weight: bold;
  font-size: 20px;
  text-align: center;
  width: 80px;
}

.nickname-cell {
  font-weight: bold;
  color: var(--accent-gold);
}

.score-cell {
  font-weight: bold;
  color: #00ff88;
  font-size: 18px;
}

.loading-row,
.empty-row,
.error-row {
  text-align: center;
  padding: 40px 20px;
  color: var(--text-dim);
  font-style: italic;
}

.error-row {
  color: #ff6b6b;
}

/* 错误状态容器样式 */
.error-state-cell {
  padding: 0 !important;
}

.error-state-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 40px;
  gap: 20px;
  background: rgba(26, 20, 16, 0.6);
  border-radius: 12px;
  margin: 20px;
  border: 2px solid rgba(255, 107, 107, 0.3);
}

.error-icon {
  font-size: 64px;
  line-height: 1;
  margin-bottom: 10px;
  animation: pulse-error 2s ease-in-out infinite;
}

@keyframes pulse-error {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.1);
    opacity: 0.8;
  }
}

.error-title {
  font-size: 24px;
  font-weight: bold;
  color: #ff6b6b;
  text-align: center;
  margin-bottom: 10px;
  font-family: var(--font-header);
}

.error-message {
  font-size: 16px;
  color: var(--text-dim);
  text-align: center;
  max-width: 500px;
  line-height: 1.6;
  margin-bottom: 20px;
}

.btn-retry {
  padding: 14px 32px;
  font-size: 18px;
  font-weight: bold;
  color: white;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
  font-family: var(--font-header);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.btn-retry:hover {
  background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
  border-color: rgba(255, 255, 255, 0.4);
}

.btn-retry:active {
  transform: translateY(0);
  box-shadow: 0 2px 10px rgba(102, 126, 234, 0.4);
}

/* 错误提示 Toast 样式 */
.error-toast {
  position: fixed;
  top: 20px;
  right: 20px;
  padding: 16px 24px;
  background: rgba(26, 20, 16, 0.95);
  border: 2px solid #ff6b6b;
  border-radius: 8px;
  color: white;
  font-size: 16px;
  font-weight: bold;
  z-index: 10000;
  opacity: 0;
  transform: translateX(400px);
  transition: all 0.3s ease;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
  max-width: 400px;
  word-wrap: break-word;
}

.error-toast.show {
  opacity: 1;
  transform: translateX(0);
}

/* ======================================================================== */
/* 排行榜详情模态框样式 */
/* ======================================================================== */
.leaderboard-detail-content {
  width: 90%;
  max-width: 800px;
  max-height: 80vh;
  overflow-y: auto;
  background: linear-gradient(135deg, #1a1410 0%, #0d0906 100%);
  border: 3px solid var(--border-color);
  border-radius: 15px;
  box-shadow: 0 10px 50px rgba(0, 0, 0, 0.8);
}

.detail-section {
  margin-bottom: 25px;
}

.detail-section h4 {
  margin: 0 0 15px 0;
  color: var(--accent-gold);
  font-family: var(--font-header);
  font-size: 22px;
  padding-bottom: 8px;
  border-bottom: 2px solid var(--border-color);
  text-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
}

.info-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 15px;
}

.info-item {
  display: flex;
  justify-content: space-between;
  padding: 10px 15px;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid var(--border-color);
  border-radius: 5px;
}

.info-label {
  color: var(--text-dim);
  font-size: 14px;
}

.info-value {
  color: var(--text-main);
  font-weight: bold;
  font-size: 16px;
}

.info-value.highlight {
  color: var(--accent-gold);
  text-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
}

.equipment-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
}

.equipment-item {
  display: flex;
  justify-content: space-between;
  padding: 8px 12px;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid var(--border-color);
  border-radius: 5px;
}

.equipment-slot {
  color: var(--text-dim);
  font-size: 14px;
}

.equipment-name {
  color: var(--accent-gold);
  font-weight: bold;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}

.stat-item {
  display: flex;
  flex-direction: column;
  padding: 10px;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid var(--border-color);
  border-radius: 5px;
  text-align: center;
}

.stat-label {
  color: var(--text-dim);
  font-size: 12px;
  margin-bottom: 5px;
}

.stat-value {
  color: var(--text-main);
  font-weight: bold;
  font-size: 16px;
}

.no-equipment,
.no-stats {
  text-align: center;
  padding: 20px;
  color: var(--text-dim);
  font-style: italic;
}

/* ======================================================================== */
/* 昵称注册模态框样式 */
/* ======================================================================== */
.nickname-modal-content {
  width: 90%;
  max-width: 500px;
  background: linear-gradient(135deg, #1a1410 0%, #0d0906 100%);
  border: 3px solid var(--border-color);
  border-radius: 15px;
  box-shadow: 0 10px 50px rgba(0, 0, 0, 0.8);
  padding: 0;
}

.nickname-modal-content .modal-header h3 {
  color: var(--accent-gold);
  font-family: var(--font-header);
  font-size: 28px;
  margin: 0 0 10px 0;
  text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

.modal-subtitle {
  color: var(--text-dim);
  font-size: 14px;
  margin: 0;
}

.form-group {
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  color: var(--text-main);
  font-size: 16px;
  margin-bottom: 10px;
  font-weight: bold;
}

.nickname-input {
  width: 100%;
  padding: 12px 15px;
  background: rgba(0, 0, 0, 0.5);
  border: 2px solid var(--border-color);
  border-radius: 8px;
  color: var(--text-main);
  font-family: var(--font-body);
  font-size: 16px;
  transition: all 0.3s ease;
  outline: none;
}

.nickname-input:focus {
  border-color: var(--accent-gold);
  box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
}

.error-message {
  display: block;
  color: #ff6b6b;
  font-size: 14px;
  margin-top: 8px;
  min-height: 20px;
}

.modal-actions {
  display: flex;
  gap: 15px;
  justify-content: center;
}

#btn-register-nickname,
#btn-skip-register {
  margin-left: 50px;
  margin-right: 50px;
}

.btn-secondary {
  background: #2a1f15 !important;
  border: 2px solid var(--border-color) !important;
  color: var(--text-dim) !important;
}

.btn-secondary:hover {
  background: #3a2f25 !important;
  color: var(--text-main) !important;
  border-color: var(--accent-gold) !important;
}

/* ========================================================================
   ACHIEVEMENT SYSTEM STYLES
   ======================================================================== */

/* 成就界面遮罩层 */
.achievement-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.85);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10001;
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
  animation: fadeIn 0.3s ease-out;
}

.achievement-overlay.hidden {
  display: none;
}

/* 成就模态框 */
.achievement-modal {
  width: 90%;
  max-width: 1200px;
  height: 85%;
  max-height: 750px;
  background: linear-gradient(135deg, #1a1410 0%, #0f0d0a 100%);
  border: 2px solid #8b7355;
  border-radius: 8px;
  box-shadow: 0 0 50px rgba(0, 0, 0, 0.95), inset 0 0 30px rgba(255, 215, 0, 0.05);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  animation: slideUp 0.3s ease-out;
}

/* 成就标题栏 */
.achievement-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 25px 30px;
  background: linear-gradient(to bottom, #2a2218, #1a1410);
  border-bottom: 1px solid #8b7355;
}

.achievement-title {
  font-family: var(--font-header);
  font-size: 2.5rem;
  color: var(--accent-gold);
  margin: 0;
  letter-spacing: 2px;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8);
}

.achievement-close-btn {
  width: 40px;
  height: 40px;
  background: url('https://i.postimg.cc/Hkg88mzY/chacha.png') no-repeat center/contain;
  background-color: transparent;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0;
  text-indent: -9999px;
  overflow: hidden;
}

.achievement-close-btn:hover {
  transform: scale(1.1);
  filter: brightness(1.2);
}

.achievement-close-btn:active {
  transform: scale(0.95);
}

/* 成就网格 */
.achievement-grid {
  flex: 1;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 20px;
  padding: 30px;
  overflow-y: auto;
  background: linear-gradient(to bottom, rgba(20, 18, 15, 0.6), rgba(10, 10, 10, 0.8));
}

.achievement-grid::-webkit-scrollbar {
  width: 8px;
}

.achievement-grid::-webkit-scrollbar-track {
  background: transparent;
}

.achievement-grid::-webkit-scrollbar-thumb {
  background: #555;
  border-radius: 4px;
}

.achievement-grid::-webkit-scrollbar-thumb:hover {
  background: #666;
}

/* 成就卡片 */
.achievement-card {
  padding: 20px;
  border-radius: 6px;
  transition: all 0.3s ease;
  min-height: 120px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

/* 未解锁状态 */
.achievement-card.locked {
  background: rgba(0, 0, 0, 0.4);
  border: 2px solid #444;
  color: #666;
}

.achievement-card.locked .achievement-card-title {
  color: #555;
  font-size: 1.5rem;
  font-weight: bold;
  margin-bottom: 10px;
}

.achievement-card.locked .achievement-card-hint {
  color: #666;
  font-style: italic;
  font-size: 0.9rem;
  line-height: 1.4;
}

/* 已解锁状态 */
.achievement-card.unlocked {
  background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 165, 0, 0.05));
  border: 2px solid var(--accent-gold);
  box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
  color: var(--text-main);
  animation: achievementUnlock 0.5s ease-out;
}

@keyframes achievementUnlock {
  0% {
    transform: scale(0.95);
    opacity: 0.8;
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.achievement-card.unlocked:hover {
  box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
  transform: translateY(-2px);
}

.achievement-card.unlocked .achievement-card-title {
  color: var(--accent-gold);
  font-size: 1.3rem;
  font-weight: bold;
  margin-bottom: 8px;
  text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

.achievement-card.unlocked .achievement-card-description {
  color: var(--text-main);
  font-size: 0.95rem;
  line-height: 1.5;
}

/* 成就卡片文字样式 */
.achievement-card-title {
  font-family: var(--font-header);
  letter-spacing: 1px;
}

.achievement-card-description,
.achievement-card-hint {
  font-family: var(--font-body);
}

/* 局内成就解锁弹窗 */
.achievement-notification {
  position: fixed;
  left: 50%;
  bottom: 120px;
  transform: translateX(-50%);
  min-width: 400px;
  max-width: 600px;
  padding: 20px 30px;
  background: rgba(0, 0, 0, 0.9);
  border: 2px solid var(--accent-gold);
  border-radius: 8px;
  box-shadow: 0 0 30px rgba(255, 215, 0, 0.4), inset 0 0 20px rgba(255, 215, 0, 0.1);
  z-index: 20001; /* 高于所有界面，确保在任何界面打开时都能看到 */
  text-align: center;
  pointer-events: none;
}

.achievement-notification.hidden {
  display: none;
}

.achievement-notification-header {
  font-family: var(--font-header);
  font-size: 0.9rem;
  color: var(--accent-gold);
  letter-spacing: 2px;
  margin-bottom: 8px;
  text-transform: uppercase;
  opacity: 0.8;
}

.achievement-notification-title {
  font-family: var(--font-header);
  font-size: 1.8rem;
  color: var(--accent-gold);
  font-weight: bold;
  margin-bottom: 8px;
  text-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
  letter-spacing: 1px;
}

.achievement-notification-description {
  font-family: var(--font-body);
  font-size: 1rem;
  color: var(--text-main);
  line-height: 1.4;
}

/* ======================================================================== */
